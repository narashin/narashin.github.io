{"componentChunkName":"component---src-templates-blog-template-js","path":"/worklight/","result":{"data":{"cur":{"id":"fe68290b-d045-55e9-98df-a514a7661d89","html":"<p>얼마전 이직한 회사에서 재택근무를 시행하고 있었고, 평소 해보지 않은 재택근무에 집중을 하기 어려웠던 나는 어떤 방법을 강구해야 했다. (왜인지 모르겠지만 뭐가 들었는지 뻔한 냉장고 문을 30분에 한번씩 열어보는 이상한 습관? 버릇?이 생겼다.) 그러다 얼마 전에 <a href=\"https://rainygirl.github.io/2021/11/pomodoro-room-light-timer\">rainygirl님의 &#x3C;규칙적 휴식을 강제하는 작업환경을 꾸며보자></a> 포스트를 읽게 되었다. 나는 휴식보다는 집중에 초점을 맞춰서, 집중을 강제하는 장치가 필요했으므로 위 포스트의 환경과 비슷한 환경을 내 방에도 똑같이 조성해보기로 했다.</p>\n<p>rainygirl님이 소개해주신 <a href=\"https://ko.wikipedia.org/wiki/%ED%8F%AC%EB%AA%A8%EB%8F%84%EB%A1%9C_%EA%B8%B0%EB%B2%95\">뽀모도로 기법</a>이나 <a href=\"https://twitter.com/starlakim/status/648064735779254272?s=20\">KMN 작업법</a>의 요는 <strong>내가 집중할 수 있는 시간을 최대로 활용하여 집중하고, 나머지 시간에는 주위를 환기시킬 수 있도록 스트레칭을 하거나 차를 마시거나 짧게 다른 일을 하는 것</strong>이었다. 사람마다 집중하기에 적절한 시간이 각자 다를 것이라고 생각한다. 나는 40분의 일하는 시간, 20분의 환기 시간을 갖도록 셋팅했다.</p>\n<h2 id=\"시나리오\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\" aria-label=\"시나리오 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시나리오</h2>\n<ul>\n<li>매 40분은 오렌지 계열의 따뜻한 색으로 방 조명을 유지하고, 20분은 붉은색 계열의 색으로 방 조명을 바꾼다.\n<ul>\n<li>단 매일 있는 화상 스크럼 시간에는 조명이 붉으면 안 되므로 따뜻한 색을 유지한다.</li>\n</ul>\n</li>\n<li>업무시간인 월요일부터 금요일, 오전 8시부터 오후 7시까지 작동한다.</li>\n</ul>\n<h2 id=\"준비물\" style=\"position:relative;\"><a href=\"#%EC%A4%80%EB%B9%84%EB%AC%BC\" aria-label=\"준비물 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>준비물</h2>\n<ul>\n<li>스마트 조명이 필요하다.\n<ul>\n<li>장비병이 있었던 나는 게이밍에 적합한 환경을 만들기 위해 이미 필립스 Hue 제품으로 방 조명을 셋팅해놓고 있었으므로, 이를 이용하면 되겠다고 생각했다.</li>\n</ul>\n</li>\n<li>crontab을 돌리기 위한 환경이 필요하다.\n<ul>\n<li>rainygirl님은 라즈베이파이를 이용하셨으나, 당장 이 토이프로젝트를 <del>손민수 하기 위해</del> 라즈베이파이를 사는건 과한 것 같아 다른 방법을 강구했다. 내게 익숙한 AWS Cloudwatch EventBridge와 Lambda를 이용해서 이 환경을 대신하기로 했다. (프리티어 기준으로 월별 100만건의 호출이 무료이고, 비용이 발생한다고 해도 100만건 당 0.2USD가 청구되므로 비용상으로 큰 문제가 없다고 판단했다.)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"뚝딱뚝딱-만들어보기\" style=\"position:relative;\"><a href=\"#%EB%9A%9D%EB%94%B1%EB%9A%9D%EB%94%B1-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"뚝딱뚝딱 만들어보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뚝딱뚝딱 만들어보기</h2>\n<p>필립스 휴 브릿지는 DHCP를 사용하고 있었으므로 이를 해제하고 수동으로 설정해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 244px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 113.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEu0lEQVQ4y5WT+U9UZxSG79/W1LYuIBaGgZm5c4dZ7zYwK6Di3thqMUGraC2LgLGWIEVAsNatjTV2sT80VmO0UkaRTWGGYZmVp5k7IE1qm/QkJ+/5zvd+z/2WXMHv/BB9LbWCuivwuysMXU/NXY7mWst1X0EdZaj2UlSxBM22Dc22FUF3VayZCwsrcFq3IFZuwl71vpFi1XuI5vXcZMyJpnexVbyDy7K5CJVK0ewlaGIJguY2oXlMKK4KXFIpzZ80cam3m6HLvQwPvj2HBi7Se6GdQ3sC1FR/gGpAt6NJpQia14zqNeNylDE60s//jZ7OVgOqrV2BoMkWaqQyjh7Z88aUy2TI5bLkcrl/zWw2a3iz2QyNYQ8esQTdVY6gqjZEsYRLl7+CTIbUwwcbn19d/ceOVtnoFcCFOHniYxzWzegeE4KqiVjFUkZujMLMNMmuL8hNx8gnXhUB2WVD86tZcvmMUc8spxiLrxj4QrS1nUCybUX3mREUXcJi387IzVGYmyO+r4H0T7dYGmkhPz9O6nG3sWj89c+8eH2X2HKKW5Pj3Istcf3xUhHY/hmSvQRdqUaQax1UO3ZwpbDDpUWWr48W72b8V3IvH5CdumOM48vPic3dp+PJbX6YfskvE0u03U0Yc+2dp7A7tqNrVgRfnZOqmnKu3P4GXs2y2HveMKV/GyE7fp/0s4uQTvDo5RBjs7f5dvIJ303GeDaXZnqheAVt51qRnDvQ/SKCN+DC7DIxXDhyKkXq/o/FHU78Tj4+RS7xkIXY1/wxeZX4cozCM9yZmuTmswRPZ9JFYNdpJHc5/loJwRP0UOkxM3RteO0V3/66b4/VDaDXhD9Qg+AJeTF5qxi+fqVoyef/c/Hfq3U93XESSa5CD7oQ3GEfJp+FgauDxuTKygqpVIpcNk02kyaT2dBCL58r1gVfMpkkm81xtvsMkmJBD3kQXGEZk2Kjp/8C+VyeRCJhGF9MxZl9vcDc/IKh8/EFJmcSRn8+nmRlZdmAFuL42RYk1Yo/4kVwhmWqdAe7mw++OdJKOk/9mT9pao/R1DZO88UJPh+cInRqjANdz2kfmX7jTS4mCe4N4gk40SM+BEdIxhGRqdQddPSdN/7NQrxKwGwCnk7kGZtc5dF4jhezEF8s9gqxsJikpe0E9loJtV5BWwdKYRkxLFPhl6j9aCfHu8/Q3neOjv5uugZ66Bropvtyj1F3Fnr9XbR0tlK7P4xYV4OvXkGOymgRBUEKKdjDCmJExh5VMAfdlOl2SnWRrYqFLYqFbZrVGJdoVsp0G+V+O+Y6B1LEi7dRxVuvoESVNWBQxh5SEA2oglivYm/UsO/UOND6KXtPHiF67AA1TbXUHt6JejCCc5eGe5eOu1HD06Diq1eRoypqAWivkxGDMmKoCLRFi1BLVOb8UB/dg730XRui9csObtz7ntYL7dgiXlyNOu4GDU+9ijeqIkdUlJCKINb6EOtkbEEZW0jGFt6A1h3ejW9/hIOtzRw6fYxDrc1Ej+7DHpVxNmi4oiruiIonrOILKchBBcGme7H5fVjrfFgDPqxBGWtYxhaRqQ56sYR9VAbcmANuqgJurCEvjqhKTUTFGVZwhRTcQQVvUMEXUPgLFYFNUyrw6i8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_3270.PNG\"\n        title=\"IMG_3270.PNG\"\n        src=\"/static/0dae64330ecec25acfe97a3356c12e74/0cba8/IMG_3270.png\"\n        srcset=\"/static/0dae64330ecec25acfe97a3356c12e74/e9ff0/IMG_3270.png 180w,\n/static/0dae64330ecec25acfe97a3356c12e74/0cba8/IMG_3270.png 244w\"\n        sizes=\"(max-width: 244px) 100vw, 244px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Hue 앱을 켠다</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEMklEQVRIx6VWyVIbVxR9S6ZiJkggqTV0v1Z3Cw1MMkMYDJplXBKEADblVFappMpkzS7b8Bfs4RdP6lzqqTouIxq8OH3fePvO76p0Oo21tTXUajXs7e0hn88jm83Ctu2hyOVycrZUKmFjY0PANVUoFNBoNHB0dIRisQittWy8xDCTyWB1dRX7+/tyv9vtPjEkA8dxkEqlBC8xMtKRUhNqGL6rgiBAv99Hr9fDzs6OHIjCNAwKRAhDSri+vi42IHP+lRK8FYoSJZNJJBIJoZZlDWBUiQKeJy9FUWOxmCzwD9zkhpkbmw1D2K6Kn9vbW9Trdbiui93dXVSrVWxtbUlY0CRcHwae4VlCGN7f3+P8/FwW2u02Dg8PJS5934/M0PM8gagcVs/YgtR47zVQtFnYGYaZoa9xCqEY8QyX13r1OSiqSt0pEZkb+lZIYFcqFZGSBqYjXnLCMCh+Hh4ecHV1JZJeXl4Kcxo4KhMKRUEIkZDVgpWDTMj0hyVkpjCHOSY19dBkAudR41ECm9WGBYKBzUxh1WGxYMZsbm5ie3t7aNaYdckU/v3u7g7NZlMWyJw4Pj5Gp9ORlCR9ieEgU4yaXDTV+tuiEFXlgQ0ZP3SIYUgGnFMqo0oU+4kNefns7EzsxveFqp+cnIgNKWXUsBmozEutVgvlclniiE5hteFrFjUW/1e+uGAeGG5QYmOC18TfQGVe5PNpal/Y+MauUR0iTvHyefz99Ss+dLvwPU/ol+trnPb7+PzpE349P0elXIamk+ig78Bl6nkeAp82zHs4anfglcpIaxf5Ygk6WIHtBzImzeY9WI6W/eeQ0S4s7ULtexo7iUW811k0fI1jN4ta3hZ6nM+h4Tuy3gw0Gs+Ae/VAoxtoqN9XbPzxoYnuRgVHgYv2WgmNUoCP79bRqqzgwHPw3tc4HALu/+y7+LOsoXp+Dv/8e4e9dhcpL0C9d4rm6S+o9U6x8m4bi1kbS9rFkvM8lh2Nn1wf3aIH9VvRwUlBo1Vw0aJ6VNPLoe5m0fRstAsa7WA4OoFGzdf4q+RAFdIpVDNJbGZTqGYtVHMhcC7r0UAeKpXJIJWzEUumEE+mhL4VvK8c2356pCwLGT5QPwjJlHC1MSn4VkguPz4+4uLiQqoNi2vUnua71YaT6+trKV/cZL8dpf59i0G1YUGNx+OD/oYPvXmowi1b1LlaXl6WZpPg2MzZ7ywtLQ3WwnNSzs04fF5NTU1J+WKF5nh2dhZWOoOir2En5jE5PSOO4uM/NzeH6elpsRkLMucjIyPSHNzc3GBsbAyKB0z3NTMzIwxj8TiSiWXEFhcwOzsHy3rqaufn54UJo4JFmecJPrUHBwcyVjxAJoQZLywsyObo6CjGx8YwPj6OiYkJkYCgJmRu7rBRIDhWZtEwI52cnJQQMO8yWxWCY3a4bFuombljJOX4P2h97HRX54ncAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_3271.PNG\"\n        title=\"IMG_3271.PNG\"\n        src=\"/static/cd0aeba87e4a607687047474da9cd9aa/37523/IMG_3271.png\"\n        srcset=\"/static/cd0aeba87e4a607687047474da9cd9aa/e9ff0/IMG_3271.png 180w,\n/static/cd0aeba87e4a607687047474da9cd9aa/f21e7/IMG_3271.png 360w,\n/static/cd0aeba87e4a607687047474da9cd9aa/37523/IMG_3271.png 720w,\n/static/cd0aeba87e4a607687047474da9cd9aa/302a4/IMG_3271.png 1080w,\n/static/cd0aeba87e4a607687047474da9cd9aa/105d8/IMG_3271.png 1170w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>환경 설정 > Bridge 설정</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEBklEQVRIx+1Xy1IiSRTNpaIhiryqoF5QlVVUFWCDgvbwUBBo0bZp7dAweqIXEzOujHHTro3Qn5iY5XzgxPzBmbipSdCGjUgvZxaHm5l178mbSdbJW8w0TVSrVfR6PbRaLXieh1wuB9u2pyKfzwvfcrmMra0tARpjYRii3++j0+mgWCzCdV0R4DjOOPA5QsuyUKlU0G63MRgMcHR09EBIBL7vi45hGNB1fQwKeo5U9mkltELpT2OMMjk7OxMpU4bHx8ditpOTE+zs7IiAl5ZPHHJFjH4ajYYg45xjc3MT9XpdTBAEwXg/KatpkD4sk8kgHo9DURSk02mBVCqFZDIJVVWRzWaFnQXExTRNE5lRh9rr6+tiAurHYjHRpzYRTwPFkhX/8v39vcDd3R1ub29xeXmJq6sr3NzciDYthwLoT3sKIiGO8/NzcUJYPpdDMQzx09u32NvdxcfRSByFeq2Gd4MBWq0mLNOEoeswn5CZj6fCsW1UKxXkLAssrelIZzXEFRWxVBrReELYuKJgNZEUbUXToegGFF1a45s+cSTVjLCs6Tn41G5g1NjGjmMJbOfNB9gPtp4zXoaIMcC+lm00HRM9bqHrGNjnFg4Cjne+MzOGgYM9z8bXch7sy5sCtvf7aHe6aHa62Gm1oeXysFwPJndfhEVwOPSgiC8VH+zXio9Gb4But4v9fh/NdhtWLg/HdeHwGUFvSbGE3zZDsN/LNnrcxKFrYfhoR0UXH0KO0Yz4GHIMfRvXZRus5HJscPsRjkDVc1Hx+KtQ9TjKHgcrBAHefxihNxjg/Wgklm1YOTiuB5u7MyHvcPhhCD8IwAqeh+16HbWtLXE4SeNoT+jUzwzOUSgUQFyM3mNSlEmVfhXZI4iHIAhJxqVa/ygYpXp6eoqDg4NvspMzToP0I8UnDSX9FFcA7Zl0+OEMSeKngZSGVIRgveBLYJOX0lOQZKVJdFUVcVVFUtMwzZ/AnhNNqXUkTyPXwR97DfzZaeKXsIAMTfSdGMJ3CS3DQFzTcL8R4J/Pp/j750/4q/4GqjYnIUEjNTYMNE0DLdNAgSR/3gz1CdKk9gC5XH3eDPWJ/bSejM1FOA/+J/xPEI6F4En1+pr++NxOE4e5M6RybLL+k3UizaZmMuNnNCbbZOn5ZKx8zlZWVlAqlUQpHI1GRZFpmBZKvgM7G8dKdE1cDSTvVHyurq4Kdd/Y2BD9hYUFXFxc4Pr6GpFIBIwcZDG5trYmCNOKAi2bQTqVQCy2DsPQhRpTZUsk9HVAGZI/oVarYXd3V7QZORCJLH/JJhIJ8XBxcRFLkQiWlpawvLwsMiDQSohcxsjanNpMDkoysrQNdBseHh6KjyL6sCFQezgcimKAViZjZKbU/hdx6c42lUpgbgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_3272.PNG\"\n        title=\"IMG_3272.PNG\"\n        src=\"/static/eb6d813d13c490308652e4470f39f248/37523/IMG_3272.png\"\n        srcset=\"/static/eb6d813d13c490308652e4470f39f248/e9ff0/IMG_3272.png 180w,\n/static/eb6d813d13c490308652e4470f39f248/f21e7/IMG_3272.png 360w,\n/static/eb6d813d13c490308652e4470f39f248/37523/IMG_3272.png 720w,\n/static/eb6d813d13c490308652e4470f39f248/302a4/IMG_3272.png 1080w,\n/static/eb6d813d13c490308652e4470f39f248/105d8/IMG_3272.png 1170w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>네트워크 설정</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAAsTAAALEwEAmpwYAAADsklEQVRIx+2W2U4bSRSG6x1Gghlj9+Ze7G4veN/buwEbsJkgsUgIktwMGhAS75I8SJT3+0f/QW2xZWLDXMxFLj5XV9XpX9VV5/xllUwmUSqVsLOzg06nA9/34bouPM/7VxgTBAGKxSLq9brAMZXP50VsOBwil8shnU4/EUylUkseC9q2jUqlgn6/j+l0isPDwwdBriibzUqHQY/F+GyaJizLWhKNs3UcB/xCwzAkTgQd20ajXhc810WKq6Kg68JPp3H84QMWizkW8zlmsxlcx1nGEPZn0ykuLi6QDQIo03GRzubg5/Lgs+U+ED3nS2VslysoVqvIFUtPYh7iHBQqVbS6PSRTaai2lcDQiqNvxjGwXtLV/xBC7aF9GZMQunoM42QC6lNgwtcTKJgayraJsm09xXnGcs5ExbGwbWrwNn6Db+r4K2NCfSwFqHRCNJpNOF4KtuvB9n4OY3XLQjvs4svXr2hPdnBVTEN9LmfQGk/QCkMkPQ+Wuxq2l0LcMNEfT/Dt+3eMF3/iUymA+pxJopE0EDomBr67FsPARdez0DTiaHk2/s7ZUNy7TlJDy9LQMOJomokXbctKSNs0n82bcZlr2zo6to56UodKGCbcIAPHD5ApFOFlsvDz20jn8tJPZXOSDoxJ5/MyH2wXZJwt5xKWhd8TGmKaDsXEbDWb6IYhhoMBwk4b49EIYaeD0XAoCc9+v9fD/myGXjeU2EG/h2ajgXqtJu+YhgFd06BYbq1WC91uF2EYCjSJ0WgkBV+tVtHr9aRm2+229DnOmEajIe8WCgXUajUpRcUa5CALna7DIL7AANYu56N61nVdYO2SaF7TNHnmmOIPBxjI9i1E77JVdA06Dr3tvVBL7Gt/fx/Hx8cYj8dvZjKZgN6qaJzn5+e4v7/H3d0dbm9vRZymu7e3tzI0WR6OCNLGy+WyHMp74Ncqumx0WkyhCDrxuohjc4XML+YhU4crJUwdptA68GAULyXu4c3NDS4vL4WrqyvM5/Pl3vyMF3vIu+Lk5ASnp6fC2dmZHEpUIaswGAzk1lTRlfj4ZiOr3M2v3dUiyG/PZDJC9PyWxObXyh4eHBzINcgEpykwUUfj0UoJzfjoHUlsCnLPoqS+vr6WPd3d3V05qaPY5aEwTegutCYSpc66SGIzoZ87TWRT6yL29R6B51BL/VdiEb8Efwn+bwWj6on+IbzGjypM/Uhsa2sLGxsb2NzcfALHYrHYeiukGN2D9/NisRCOjo6k5Rj/KMXj8VcF/wGsMxv/xG6ftQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_3273.PNG\"\n        title=\"IMG_3273.PNG\"\n        src=\"/static/66fb0c2a26d97656f6bf442a26841b03/37523/IMG_3273.png\"\n        srcset=\"/static/66fb0c2a26d97656f6bf442a26841b03/e9ff0/IMG_3273.png 180w,\n/static/66fb0c2a26d97656f6bf442a26841b03/f21e7/IMG_3273.png 360w,\n/static/66fb0c2a26d97656f6bf442a26841b03/37523/IMG_3273.png 720w,\n/static/66fb0c2a26d97656f6bf442a26841b03/302a4/IMG_3273.png 1080w,\n/static/66fb0c2a26d97656f6bf442a26841b03/105d8/IMG_3273.png 1170w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>DHCP 해제</li>\n</ul>\n<h3 id=\"포트포워딩-설정\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%ED%8A%B8%ED%8F%AC%EC%9B%8C%EB%94%A9-%EC%84%A4%EC%A0%95\" aria-label=\"포트포워딩 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포트포워딩 설정</h3>\n<p>외부(AWS Lambda)환경에서 접속할 수 있어야 하기에 무선공유기의 포트포워드 설정을 해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpElEQVQ4y61SS0vDQBDOfxa8ehbEi4JHwYMIamnEqlhoiwdp7btV9FSStHk02zRPm0RNPtnVxKhRKjjwMa+db2bY4abTKdrtNnq9HkOn08FgMMDlxSU2tjewtrmG1ZVVFPkiyuUyeJ5HqVRiNkW9XsdwOGS1oiiC0zQNrVaLBbrdLgO1q9UqTs9PUSqfoXBcYD4FJalUKqjVagzNZjMdRBAEcJ7nwXEcuK6bgvqLxQJBECDwA4RPIfMpfN9PbYrkPdV0W44W/ZfMZjNwtGMcx39ElBsnhHxMmAT/Ktk6NmGWMNFkZmCiaJjIGnSd0CDLWZYFRVOgqDIrjqLoU+03wiQxGYt4uNrBqLELSRQZX4wYruXh5PoIhcY+dJXg+eV5OUJ7rkJvrMPsb8E0NETReyMi4fBmD3znAHfS4K0OS6zsPS5g6SPYRIAxt9LVLMfCndjHvXQLlSiIo3i5CQ3DwEgYYyyrME0zcxYGZEmBPFagT/VPQ/xKGIYhXMdB4PvpdFTYIXsubNtmB577y9lEVv90GnnxJMfuMK/T14PNI/j6NiF8BSDQKK86nfMrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-12-07 오후 2.48.52.png\"\n        title=\"스크린샷 2021-12-07 오후 2.48.52.png\"\n        src=\"/static/68a6a7780b793df537ea0da34bd63e73/0a47e/worklight_2.48.52.png\"\n        srcset=\"/static/68a6a7780b793df537ea0da34bd63e73/e9ff0/worklight_2.48.52.png 180w,\n/static/68a6a7780b793df537ea0da34bd63e73/f21e7/worklight_2.48.52.png 360w,\n/static/68a6a7780b793df537ea0da34bd63e73/0a47e/worklight_2.48.52.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li>ipTIME을 쓰고 있으므로 접속. (참고로 초기 비밀번호는 <code class=\"language-text\">admin</code>이다. 아이디도 admin)</li>\n<li>고급설정 > NAT/라우터 관리 > 포트포워드 설정</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqUlEQVQY0z2PSQqFQAxEvf/F3OlCnO1uR1Cc+gb1eQH/okjI8FJJnHOqqkohBGVZpmEYdJ6npmmS9155npu6rtN1Xdr33Wbp3fet931VlqXSNLV6AgDgPM8GWdfVoEVRqG1bqyGWmOFYjNEEDAGib8Bt29T3vXC6LItdxg3LAKmN42jCIa6e59FxHGIX0cMIhxOoOKzr2sDk6MubpvnH7wsih5nhG3oIhz+sYyCsEC3DWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-12-07 오후 2.52.14.png\"\n        title=\"스크린샷 2021-12-07 오후 2.52.14.png\"\n        src=\"/static/142d533ab72c1d4f52d03e9e3f5ea7dd/37523/worklight_2.52.14.png\"\n        srcset=\"/static/142d533ab72c1d4f52d03e9e3f5ea7dd/e9ff0/worklight_2.52.14.png 180w,\n/static/142d533ab72c1d4f52d03e9e3f5ea7dd/f21e7/worklight_2.52.14.png 360w,\n/static/142d533ab72c1d4f52d03e9e3f5ea7dd/37523/worklight_2.52.14.png 720w,\n/static/142d533ab72c1d4f52d03e9e3f5ea7dd/302a4/worklight_2.52.14.png 1080w,\n/static/142d533ab72c1d4f52d03e9e3f5ea7dd/78958/worklight_2.52.14.png 1320w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>앱에서 확인한 Hue Bridge의 IP주소와 포트를 입력하고, 접속할 외부포트를 적당히 정해준 뒤 적용하면 된다.</li>\n</ul>\n<h3 id=\"phue를-이용한-lambda-코드-작성\" style=\"position:relative;\"><a href=\"#phue%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-lambda-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\" aria-label=\"phue를 이용한 lambda 코드 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>phue를 이용한 Lambda 코드 작성</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> phue</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> time\n<span class=\"token keyword\">from</span> phue <span class=\"token keyword\">import</span> Bridge\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    b <span class=\"token operator\">=</span> Bridge<span class=\"token punctuation\">(</span><span class=\"token string\">'나의 Hue Bridge 아이피'</span><span class=\"token punctuation\">)</span>\n    b<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Yellow</span>\n    <span class=\"token keyword\">if</span> time<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> datetime<span class=\"token punctuation\">.</span>utcnow<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> time<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'on'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bri'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">254</span><span class=\"token punctuation\">)</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'xy'</span><span class=\"token punctuation\">,</span> convert_color<span class=\"token punctuation\">(</span><span class=\"token string\">'e69138'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># Red</span>\n    <span class=\"token keyword\">elif</span> time<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> datetime<span class=\"token punctuation\">.</span>utcnow<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> time<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'on'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bri'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">254</span><span class=\"token punctuation\">)</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'xy'</span><span class=\"token punctuation\">,</span> convert_color<span class=\"token punctuation\">(</span><span class=\"token string\">'cc0000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># Off</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        b<span class=\"token punctuation\">.</span>set_light<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'on'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">convert_color</span><span class=\"token punctuation\">(</span>hexCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    R <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>hexCode<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n    G <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>hexCode<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n    B <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>hexCode<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n\n    total <span class=\"token operator\">=</span> R <span class=\"token operator\">+</span> G <span class=\"token operator\">+</span> B\n\n    <span class=\"token keyword\">if</span> R <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        firstPos <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        firstPos <span class=\"token operator\">=</span> R <span class=\"token operator\">/</span> total\n\n    <span class=\"token keyword\">if</span> G <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        secondPos <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        secondPos <span class=\"token operator\">=</span> G <span class=\"token operator\">/</span> total\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>firstPos<span class=\"token punctuation\">,</span> secondPos<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">handler</code>에서 시간은 적당히 내가 원하는 시간을 커스텀하게 지정해주었고, (스크럼 시간이나 아주 이른 오전시간은 붉은 조명으로 바뀌는 시간에서 제외했다.) <code class=\"language-text\">convert_color</code> 에서는 <a href=\"https://www.color-hex.com/\">https://www.color-hex.com/</a> 를 통해 내가 원하는 색깔을 Hue가 원하는 색상의 값으로 변형해서 handler로 넘겨주도록 했다. 참고로 시간은 UTC 기준이다.</p>\n<h3 id=\"aws-lambda에-배포\" style=\"position:relative;\"><a href=\"#aws-lambda%EC%97%90-%EB%B0%B0%ED%8F%AC\" aria-label=\"aws lambda에 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS Lambda에 배포</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVQ4y51Ti46cMAzc//+6XnWqbrcHt12WNwRICAQCTGVD2MfpVPVAIxvHTJyxc3h7O+LHy0/4lxBVVaEsS4iqhlQKjZT/jcM5jOBdrvCCkOFfAqRpCtW2jFZrJr//btuWY+SrzXf28JEKeFGOykyI1IisHZBnGcIwQl3XGIaBf4zjBNcwRNM0sNYywfn8B77/wbHR2pXQjwv8vsQIS4m47lD1I06nE0iK19dfeH/3YIYBURQjCALehAillJxzPJ44x1V5yPQIYWbknUWmLTKpObnvzQpjoLsOdpoY0zRhHEcmiJMUcZIgy3P0fb9WWAiBLC+gWA/Nx+v6nkl26DV+D4pT5cYYBsW4KdTVJEmxzDMma7mC3f4DdHQC5VPVTEgjkhfF1jGNcbSYiZx+Ivvsb1iWBfQ4Szl85KqucY1iFlTrjolp14Xe5YaZMM87viTMixJRVm4aKCjVPurXrZuQXstG6ip0eCCUUqEoBWtg7/V5AsUcAc3c83M7clVDyFU7GhHqMI0LWeeTFA/xrt/XCSQRVc6EtMh3WAgMVKW9dc+BNlv9z2uOzLoKqdU0h3Uj90GmIWVrzF1si7tv8xgnrdc5FAKe7/OVcrei+wb0Nth/AVnVhoSbQcnPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-12-07 오후 3.21.47.png\"\n        title=\"스크린샷 2021-12-07 오후 3.21.47.png\"\n        src=\"/static/959c7e6f6dacb52ba02bb1134b2908ab/37523/worklight_3.21.47.png\"\n        srcset=\"/static/959c7e6f6dacb52ba02bb1134b2908ab/e9ff0/worklight_3.21.47.png 180w,\n/static/959c7e6f6dacb52ba02bb1134b2908ab/f21e7/worklight_3.21.47.png 360w,\n/static/959c7e6f6dacb52ba02bb1134b2908ab/37523/worklight_3.21.47.png 720w,\n/static/959c7e6f6dacb52ba02bb1134b2908ab/302a4/worklight_3.21.47.png 1080w,\n/static/959c7e6f6dacb52ba02bb1134b2908ab/07a9c/worklight_3.21.47.png 1440w,\n/static/959c7e6f6dacb52ba02bb1134b2908ab/11864/worklight_3.21.47.png 2034w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Lambda > 함수 > 함수생성</li>\n</ul>\n<p>함수이름과 런타임을 지정하고 함수를 생성한다.</p>\n<p>이때 외부 패키지인 <code class=\"language-text\">phue</code> 는 자동으로 import 되지 않으므로 따로 레이어에 추가하는 작업이 필요하다. 레이어(계층)를 이용하여 따로 추가해도 되고, <a href=\"https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/python-package.html\">zip 파일로 한번에 코드와 함께 올려도 상관없지만</a> 나는 따로 관리하기 위해 함수와 패키지레이어를 분리해서 올리려고 한다.</p>\n<h3 id=\"레이어-추가하기\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%9D%B4%EC%96%B4-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"레이어 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레이어 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> 모듈 <span class=\"token parameter variable\">-t</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>위 명령어를 통해 생성된 모듈들을 zip으로 묶는다. 나는 <code class=\"language-text\">phue</code> 만 설치하여 압축했다.</p>\n<ul>\n<li>\n<p>Lambda > 계층 > 계층생성</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlUlEQVQ4y6VU23KCMBDly/sD/Zk+9h86fas+Y50KSEiAJBBI4HQ2GkRF69jMnMn9ZHfPbqLtXiBhAmlRIucCSZqhrCrUUj6F6Gu1xsfnJ1ar9bRY1fXTiFhRYPO9BRcCTdtCNw2aJ6G0RiSEQBxvoJSCcw5938Na+xDobADNjTGIpFIwXYcR8ITDMDyMcRwnUCPSiNyslUItFTp6ybm/QRY6h9ACIRkUkQg5Yyg49wtuGDzuWRb2A9lkIRE2rUFn7cHd44a/5IaJ/ArHhxcJhe6wyxjiOEaeM9S1RG/t2eElzF09IyRlioKDsQJSKkgpJ3fmLVy6nF9ZSCon2R6s4D7YRNYag6Zpfd+25ixelyRXhCRKkqbY5zl+dglYJWFM58moJw+WBLjpMmV3ljOIsgQXJWrd+pycx2uYCULj3ie1XbaQSo0+A4pdpRp01h1VdidcEIZKuUlIdai1htQnwkeAM9XHQ6VQdVyqN9xJlxCCeaWE5kYcYkhWPoPwO/lxyaB5hug/fx9lCH1/GeMo318h3l7wC0jUfO8t3tNvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-12-07 오후 3.32.49.png\"\n        title=\"스크린샷 2021-12-07 오후 3.32.49.png\"\n        src=\"/static/becf06e30b58f8bc7d85a1b677c9726f/37523/worklight_3.32.49.png\"\n        srcset=\"/static/becf06e30b58f8bc7d85a1b677c9726f/e9ff0/worklight_3.32.49.png 180w,\n/static/becf06e30b58f8bc7d85a1b677c9726f/f21e7/worklight_3.32.49.png 360w,\n/static/becf06e30b58f8bc7d85a1b677c9726f/37523/worklight_3.32.49.png 720w,\n/static/becf06e30b58f8bc7d85a1b677c9726f/302a4/worklight_3.32.49.png 1080w,\n/static/becf06e30b58f8bc7d85a1b677c9726f/07a9c/worklight_3.32.49.png 1440w,\n/static/becf06e30b58f8bc7d85a1b677c9726f/8adb9/worklight_3.32.49.png 1638w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n<p>압축한 파일을 계층 구성을 통해 올려주면 된다.</p>\n<h3 id=\"cloudwatch-eventbridge를-통해-trigger-연결\" style=\"position:relative;\"><a href=\"#cloudwatch-eventbridge%EB%A5%BC-%ED%86%B5%ED%95%B4-trigger-%EC%97%B0%EA%B2%B0\" aria-label=\"cloudwatch eventbridge를 통해 trigger 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CloudWatch EventBridge를 통해 Trigger 연결</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABP0lEQVQoz51Sy07DMBDMX/MrfAbiwJEzqigqUttDVVQKtHnZaRrH9tpuOshOCFBShLA0srXemV3POirLEtPZHPPZHIvVC3bSwFkDYwysh/Wwf0bkibWUUEpBaQ2iVuy/iLyqc9+rhEsfPxzgnEOb4/qz6TofFBwKehJpQnl1ATa7xeotxdNyiZwx+EVEn4UHBYl+XHiSXj9C8hi7fYXj8RhAXe5ZD62zcAAOTdOTPJqmCfGqVojjpH9uVQlQJzjYIZUC++s78G2KbZJgs9kGJEmKouBQSsI6B611wAfRFxCiRpYzPK9fEScplNKIFCvBLm+wmEwxnkwwHj9gNLpHluWQUvYip0PzuyYKv6MSIuR6OyKpNQqSyDkH4wWkUu2EuyfSmaF9LdL+gM5DKRUKXoSW0yyHqOve+HMC5hcP3wHDxQU5buA62wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-12-07 오후 3.37.29.png\"\n        title=\"스크린샷 2021-12-07 오후 3.37.29.png\"\n        src=\"/static/ad06ae2d553a402c8f002b5aeb661ac4/37523/worklight_3.37.29.png\"\n        srcset=\"/static/ad06ae2d553a402c8f002b5aeb661ac4/e9ff0/worklight_3.37.29.png 180w,\n/static/ad06ae2d553a402c8f002b5aeb661ac4/f21e7/worklight_3.37.29.png 360w,\n/static/ad06ae2d553a402c8f002b5aeb661ac4/37523/worklight_3.37.29.png 720w,\n/static/ad06ae2d553a402c8f002b5aeb661ac4/302a4/worklight_3.37.29.png 1080w,\n/static/ad06ae2d553a402c8f002b5aeb661ac4/fbf76/worklight_3.37.29.png 1252w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Lambda 함수 상세 페이지 상단에 있는 <code class=\"language-text\">트리거 추가</code> 를 통해 EventBridge를 설정한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAByklEQVQ4y5VUC7KbMAzk/jfpMXqOttO8AOFn8MN/g2E7EoFk2pc08cyOAIu1pJWVtV2H0/mMpmkwTRNijIhTZBtCeB0xwDmHzCiNsRswSAlr7QHnPB8wz/NLSCkxcebOLcS376iFQJ4XyIsSp48zLlXNhMuysHNKywMk9gkxwnmPzGoNJxWWdcWcEuY5YeITF6zrys6vgHzjNCGrB4W6E2iaFtY5hjaGa/juotQzEyZ0oocc5NsEFNUOWpRZppVCUZScP4Ei9D4caTzDPelB6Hw4yEjZPe2ZhXiOLwmV0rhcKoQQ4UM4ave/6J5E6KGNhbEWyhgY67beIsWf4GGEnlN12+bV4aVWeRThqBR+/PyFum6gtIbWhi3V8e+07n/ev99bJmyVR15WqKrq7Zb5OsJxRHmpuJlJFHctwa46lWQXbN+nGj/sQxKBCKu64TvcdoKF2dvHOn9rK+5Tz/c2Lcs/UR8qG0MTZmtoii54zxLtpy9XoY735TYU7u8yDZNMKcVThm5Lnuc4FRV+lw0udQspJfq+h5SfGAbJVogenRAQQvB+1wl+p+e4EWr+KPqBnfpRo/20UNZvQ5YH7nQdvhPPPLI33Papxn8Al71/AzkqVXUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-12-07 오후 3.39.35.png\"\n        title=\"스크린샷 2021-12-07 오후 3.39.35.png\"\n        src=\"/static/c2a29aab2803bb3c4c82e29f15e6c2ce/37523/worklight_3.39.35.png\"\n        srcset=\"/static/c2a29aab2803bb3c4c82e29f15e6c2ce/e9ff0/worklight_3.39.35.png 180w,\n/static/c2a29aab2803bb3c4c82e29f15e6c2ce/f21e7/worklight_3.39.35.png 360w,\n/static/c2a29aab2803bb3c4c82e29f15e6c2ce/37523/worklight_3.39.35.png 720w,\n/static/c2a29aab2803bb3c4c82e29f15e6c2ce/302a4/worklight_3.39.35.png 1080w,\n/static/c2a29aab2803bb3c4c82e29f15e6c2ce/07a9c/worklight_3.39.35.png 1440w,\n/static/c2a29aab2803bb3c4c82e29f15e6c2ce/7e21b/worklight_3.39.35.png 1626w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>EventBridge > 새 규칙 생성 을 통해 crontab을 대신할 스케쥴을 정해준다.</li>\n</ul>\n<p>사실 이미 코드에 시간별 조명색을 다 정해놔서 언제 호출 되든 코드에 스태틱하게 박아놓은 색으로 변할테지만, 최소한의 호출만하기 위해 시간을 정해서 트리거링 하기로 했다. (너무 자주 호출하면 비용이 발생하기 때문에 신중 또 신중)</p>\n<h2 id=\"웁스-오류-발생\" style=\"position:relative;\"><a href=\"#%EC%9B%81%EC%8A%A4-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\" aria-label=\"웁스 오류 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웁스! 오류 발생!</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>ERROR<span class=\"token punctuation\">]</span> PhueRegistrationException: <span class=\"token punctuation\">(</span><span class=\"token number\">101</span>, <span class=\"token string\">'The link button has not been pressed in the last 30 seconds.'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>phue를 통해 Hue Bridge를 제어하면, 프로그램 구동 최초에 Hue Bridge의 물리버튼을 눌러줘야 내가 만든 프로그램이 register된다. 최초에는 이 작업을 해주지 않았기 때문에 위와 같은 오류가 발생했다.</p>\n<p>브릿지의 물리버튼을 누르면 <code class=\"language-text\">.python_hue</code> 파일이 자동생성되어 그곳에 config 정보가 들어가게 되는데, 프로그램이 이 파일을 계속 사용하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>ERROR<span class=\"token punctuation\">]</span> OSError: <span class=\"token punctuation\">[</span>Errno <span class=\"token number\">30</span><span class=\"token punctuation\">]</span> Read-only <span class=\"token function\">file</span> system: <span class=\"token string\">'/.python_hue'</span></code></pre></div>\n<p>그러나, Lambda에서는 <code class=\"language-text\">/tmp/</code> 폴더에만 Write를 할 수 있고, 이는 임시 폴더로서 매번 삭제되어 프로그램이 해당 파일을 참조하지 못한다는 어려움이 있었다. <code class=\"language-text\">phue</code> 를 들여다보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> ip<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> config_file_path<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token keyword\">if</span> config_file_path <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span> \n\t     self<span class=\"token punctuation\">.</span>config_file_path <span class=\"token operator\">=</span> config_file_path \n\t <span class=\"token keyword\">elif</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span>USER_HOME<span class=\"token punctuation\">)</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">and</span> os<span class=\"token punctuation\">.</span>access<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span>USER_HOME<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>W_OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t     self<span class=\"token punctuation\">.</span>config_file_path <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span>USER_HOME<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.python_hue'</span><span class=\"token punctuation\">)</span> \n\t <span class=\"token keyword\">elif</span> <span class=\"token string\">'iPad'</span> <span class=\"token keyword\">in</span> platform<span class=\"token punctuation\">.</span>machine<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token string\">'iPhone'</span> <span class=\"token keyword\">in</span> platform<span class=\"token punctuation\">.</span>machine<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token string\">'iPad'</span> <span class=\"token keyword\">in</span> platform<span class=\"token punctuation\">.</span>machine<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t     self<span class=\"token punctuation\">.</span>config_file_path <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span>USER_HOME<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Documents'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.python_hue'</span><span class=\"token punctuation\">)</span> \n\t <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> \n\t     self<span class=\"token punctuation\">.</span>config_file_path <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getcwd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.python_hue'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같은 구문을 찾을 수 있었다. config 파일의 path를 지정해줄 수 있는 것을 확인할 수 있다. 그러나 Lambda의 특성상 영구저장할 곳이 마땅치 않으므로, 매번 config 파일을 쓰는 것을 멈추고 그냥 ip, username 쪽에 값을 지정해주기로 했다.</p>\n<p>이 코드를 수정하여 다시 패키지를 압축하고 Lambda 레이어에 올려주면 오류 수정 완완.</p>\n<h2 id=\"개선할-점\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%A0%90\" aria-label=\"개선할 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개선할 점</h2>\n<p>지금 당장이야 쓰는데에 별 문제는 없지만 Lambda 함수에 IP나 ID정보를 그냥 넣는건 좀 불안하다.</p>\n<p>Lambda > 함수 > 구성 > 환경 변수에서 해당 값들을 따로 관리해주는것이 좋겠다.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><img src=\"/df1f20a9075206e2bac43f928279dcc0/IMG_3257-2.gif\" alt=\"IMG_3257-2.gif\"></p>\n<p>주말에 파이썬과 친해지기 위해 파이썬으로 뭘 해볼까 하다가 만들어본 프로젝트였다. 결과적으로 딱히 파이썬을 엄청나게 사용하진 않았지만, 뭔가 하나 만들었다는 성취감이 동력이 되어 더 열심히 공부하고자 하는 의지가 생긴 것 같다. 더불어 내가 알고 있는 것들이 완전히 쓸모없진 않았구나 하는 안도감도 조금 생긴 것 같다.</p>\n<p>이와 별개로 뽀모도로 기법이 효과가 있는지는 아직 잘 모르겠다. 일단 주어진 40분에는 최대한 집중을 해보려고 하는데 쉬는 시간 20분엔 어김없이 냉장고 문을 열기 때문이다. (이것은 단순히 나의 식욕/식탐과 더 깊은 관련성이 있을 것이라고 예상된다.) 모쪼록 더 높은 생산력을 낼 수 있는 내가 되길 바라며…</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\">시나리오</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A4%80%EB%B9%84%EB%AC%BC\">준비물</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%9A%9D%EB%94%B1%EB%9A%9D%EB%94%B1-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EA%B8%B0\">뚝딱뚝딱 만들어보기</a></p>\n<ul>\n<li><a href=\"#%ED%8F%AC%ED%8A%B8%ED%8F%AC%EC%9B%8C%EB%94%A9-%EC%84%A4%EC%A0%95\">포트포워딩 설정</a></li>\n<li><a href=\"#phue%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-lambda-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\">phue를 이용한 Lambda 코드 작성</a></li>\n<li><a href=\"#aws-lambda%EC%97%90-%EB%B0%B0%ED%8F%AC\">AWS Lambda에 배포</a></li>\n<li><a href=\"#%EB%A0%88%EC%9D%B4%EC%96%B4-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">레이어 추가하기</a></li>\n<li><a href=\"#cloudwatch-eventbridge%EB%A5%BC-%ED%86%B5%ED%95%B4-trigger-%EC%97%B0%EA%B2%B0\">CloudWatch EventBridge를 통해 Trigger 연결</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9B%81%EC%8A%A4-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\">웁스! 오류 발생!</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%A0%90\">개선할 점</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n</ul>\n</div>","excerpt":"얼마전 이직한 회사에서 재택근무를 시행하고 있었고, 평소 해보지 않은 재택근무에 집중을 하기 어려웠던 나는 어떤 방법을 강구해야 했다. (왜인지 모르겠지만 뭐가 들었는지 뻔한 냉장고 문을 30분에 한번씩 열어보는 이상한 습관? 버릇?이 생겼다.) 그러다 얼마 전에 rainygirl님의 <규칙적 휴식을 강제하는 작업환경을 꾸며보자> 포스트를 읽게 되었다. 나는 휴식보다는 집중에 초점을 맞춰서, 집중을 강제하는 장치가 필요했으므로 위 포스트의 환경과 비슷한 환경을 내 방에도 똑같이 조성해보기로 했다. rainygirl님이 소개해주신 뽀모도로 기법이나 KMN 작업법의 요는 내가 집중할 수 있는 시간을 최대로 활용하여 집중하고, 나머지 시간에는 주위를 환기시킬 수 있도록 스트레칭을 하거나 차를 마시거나 짧게 다른 일을 하는 것이었다. 사람마다 집중하기에 적절한 시간이 각자 다를 것이라고 생각한다. 나는 40분의 일하는 시간, 20분의 환기 시간을 갖도록 셋팅했다. 시나리오 매 40분은 오…","frontmatter":{"date":"January 01, 2022","title":"뽀모도로 기법을 이용한 방 조명 셋팅하기","categories":"craft","author":"신나라","emoji":"🔮"},"fields":{"slug":"/worklight/"}},"next":{"id":"3f04f744-98a7-5238-977e-0def1fea31f5","html":"<h2 id=\"a-cloudflare-의-advanced-ddos-를-이용한-방어-전략\" style=\"position:relative;\"><a href=\"#a-cloudflare-%EC%9D%98-advanced-ddos-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%A0%84%EB%9E%B5\" aria-label=\"a cloudflare 의 advanced ddos 를 이용한 방어 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A. Cloudflare 의 Advanced DDoS 를 이용한 방어 전략</h2>\n<ol>\n<li>봇넷을 통해 공격이 들어오면 데이터베이스에 부하가 발생하고, 서비스 요청이 정상적으로 처리되지 않는다</li>\n<li>서비스 운영자는 이를 확인하고 Cloudflare 에서 <strong>I’m Under Attack</strong> 모드를 활성화한다</li>\n<li>하지만 언젠가부터 <strong>I’m Under Attack</strong> 을 통과하는 방식의 공격이 발생하였다</li>\n<li>이를 방어하기 위해서 <strong>Rate Limiting</strong> 을 사용하여 방어하려고 하였으나, <strong>Rate Limit</strong> 집계 시점 이전에 이미 방대한 요청이 들어오기 때문에, <strong>능동 방어에는 시간이 걸린다(1분 이상)</strong></li>\n</ol>\n<h2 id=\"b-aws-waf-security-automations-template을-이용한-방어-전략\" style=\"position:relative;\"><a href=\"#b-aws-waf-security-automations-template%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%A0%84%EB%9E%B5\" aria-label=\"b aws waf security automations template을 이용한 방어 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>B. AWS WAF Security Automations Template을 이용한 방어 전략</h2>\n<p><img src=\"~@img/shieldee/waf-securityAutomationtemplate.png\" alt=\"\"></p>\n<ol>\n<li>봇넷을 통해 공격이 들어오면 데이터베이스에 부하가 발생하고, 서비스 요청이 정상적으로 처리되지 않는다</li>\n<li>CloudFront 또는 Application Load Balancer 에서 Access Logs 를 활성화하고, S3에 저장하도록 한다</li>\n<li>S3에 Access Log가 적재된 이후에, Amazon Athena 가 해당 로그를 <strong>5분 단위로 집계</strong>하여, 지정한 요청 임계치를 초과한 IP들을 AWS WAF IP Set에 추가한다</li>\n</ol>\n<ul>\n<li>마찬가지로 집계 시점 이전에 이미 방대한 요청이 들어오므로, <strong>대응이 느리다(5분 이상)</strong></li>\n</ul>\n<h2 id=\"c-shieldee-의-대응-시나리오\" style=\"position:relative;\"><a href=\"#c-shieldee-%EC%9D%98-%EB%8C%80%EC%9D%91-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\" aria-label=\"c shieldee 의 대응 시나리오 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>C. Shieldee 의 대응 시나리오</h2>\n<p><img src=\"~@img/shieldee/shieldee.png\" alt=\"\"></p>\n<ol>\n<li>봇넷을 통해 공격이 들어오면 앞단 NGINX 에서 지정된 Rate Limiting 정책에 해당하는 개별 IP들을 에러 로그로 떨어뜨린다.</li>\n<li>해당 에러 로그를 탐지하자마자 곧바로 엣지 WAF 에 룰셋으로 해당 IP를 블락한다.\n<ul>\n<li>엣지 영역에서 블락하지 못한 트래픽들을 위한 최후방어선으로 동작하며,</li>\n<li><strong>Rate Limiting 탐지 이후 3초 안에 블락한다.</strong></li>\n</ul>\n</li>\n<li>일시적인 오탐 등을 고려하여 1시간 뒤에 해당 IP들을 해제한다.</li>\n</ol>\n<h2 id=\"2-동작-방식\" style=\"position:relative;\"><a href=\"#2-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\" aria-label=\"2 동작 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 동작 방식</h2>\n<ol>\n<li>봇넷을 통해 공격이 들어오면, NGINX 의 <strong>Rate Limiting</strong> 기능으로 개별 IP들의 초당 요청 수를 제한하도록 한다\n<ol>\n<li>이 때의 <strong>Rate Limiting</strong> 대상은 동적 컨텐츠 요청 영역으로만 한정한다</li>\n</ol>\n</li>\n<li><strong>Rate Limiting</strong> 에 적용된 IP 들은 NGINX 에러 로그 파일로 기록이 된다.</li>\n<li><strong>fluentd</strong> 로 에러 로그를 테일링(Tailing) 하여, <strong>Rate Limiting</strong> 로그 형식에 맞춰서 정규표현식으로 캡처를 한다</li>\n<li>캡처된 내용을 <strong>Amazon Kinesis Data Streams</strong> 로 전달하고,</li>\n<li><strong>Kinesis Data Streams</strong> 에서 트리거링된 <strong>AWS Lambda</strong> 가 동작하여, 전달된 IP를 <strong>DynamoDB</strong>에 기록한다.</li>\n<li>기록된 정보는 <strong>DynamoDB Streams</strong> 로 <strong>AWS Lambda</strong> 에 전달되는데, 이 때 해당 IP를 Cloudflare Access Rule 에 Block 모드로 추가한다\n<ol>\n<li>Access Rule 에 추가하고 반환받은 Access Rule Id를 <strong>DynamoDB</strong> 에 기록한다</li>\n<li>이 때, <code class=\"language-text\">expirationTime</code> 속성을 TTL 로 추가하고, 기본 TTL을 3600(1시간)으로 지정한다.</li>\n</ol>\n</li>\n<li><strong>DynamoDB</strong> 에서 TTL 이 경과된 항목이 삭제되면서, 해당 내용이 <strong>DynamoDB Streams</strong> 을 통해서 <strong>AWS Lambda</strong> 로 트리거링된다.\n<ol>\n<li><strong>DynamoDB</strong> 에 기록된 Access Rule Id 으로 Cloudflare Access Rule 에 등록된 IP를 해제한다</li>\n</ol>\n</li>\n</ol>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#a-cloudflare-%EC%9D%98-advanced-ddos-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%A0%84%EB%9E%B5\">A. Cloudflare 의 Advanced DDoS 를 이용한 방어 전략</a></li>\n<li><a href=\"#b-aws-waf-security-automations-template%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%A0%84%EB%9E%B5\">B. AWS WAF Security Automations Template을 이용한 방어 전략</a></li>\n<li><a href=\"#c-shieldee-%EC%9D%98-%EB%8C%80%EC%9D%91-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\">C. Shieldee 의 대응 시나리오</a></li>\n<li><a href=\"#2-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\">2. 동작 방식</a></li>\n</ul>\n</div>","frontmatter":{"date":"January 01, 2022","title":"Shieldee","categories":"craft","author":"신나라","emoji":"🔨"},"fields":{"slug":"/shieldee/"}},"prev":{"id":"a08a4a47-7039-562d-89c5-1a746e07c4cc","html":"<p>협력 업체에서 본인들의 데이터를 다운받을 수 있게 getObject 권한을 <strong>일시적</strong>으로 주었다. 그것은 단 한달.</p>\n<p>우리가 받아야 하는 데이터는 평균 6.26MB 크기로, 대략 1000만개 이상의 mp3 파일들이다.</p>\n<h1 id=\"가장-쉬운-방법-srr\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%9E%A5-%EC%89%AC%EC%9A%B4-%EB%B0%A9%EB%B2%95-srr\" aria-label=\"가장 쉬운 방법 srr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가장 쉬운 방법 SRR</h1>\n<p><img src=\"/9b0c99d3eee8429cad6aae919ce8a720/6-giphy.gif\" alt=\"giphy.gif\"></p>\n<p>SRR은 동일 리전 복제(Same Region Replication)의 줄임말로 AWS에서 정식으로 지원하고 있는 기능이다. 새로 업로드된 S3 객체를 동일한 AWS 리전에서 대상 버킷으로 비동기식 자동 복제를 지원한다.</p>\n<p>이 때까지만 해도 데이터가 실시간으로 올라오고 우리는 실시간 sync에 가깝게 bucket을 <strong>복사</strong>한다고 착각했기 때문에 가장 먼저 떠오른 방법이다. 하지만 신작을 copy하는 것이 아닌 구작을 뒤늦게 받아오는 작업이었고 다른 방법이 필요했다.</p>\n<h2 id=\"-새로-올라오는-데이터가-아닌데\" style=\"position:relative;\"><a href=\"#-%EC%83%88%EB%A1%9C-%EC%98%AC%EB%9D%BC%EC%98%A4%EB%8A%94-%EB%8D%B0%EC%9D%B4%ED%84%B0%EA%B0%80-%EC%95%84%EB%8B%8C%EB%8D%B0\" aria-label=\" 새로 올라오는 데이터가 아닌데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😵 새로 올라오는 데이터가 아닌데?</h2>\n<p>(물론 교차 계정 SRR에도 권한 조정 문제가 필요하지만) SRR을 쓰지 않고 버킷에서 버킷으로 copy를 하려고 한다면, 소스 버킷의 Bucket policy에서 데스티네이션 버킷에 권한을 따로 풀어주는 선언문이 필요했다.</p>\n<p>하지만 소스 버킷의 bucket policy 는 우리가 건드릴 수 있는 영역이 아니었다. (이부분에서 안일하게 생각했던 것이, 과거 경험에서는 “제가 말한대로 바꿔야 가격효율적입니다.”라고 말하면 바로 바꿔주는 고객을 많이 만났기 때문에 당연히 bucket policy도 쉽게 바꿀 수 있을 것이라고 생각했다.)</p>\n<h3 id=\"-우리가-건드릴-수-있는-영역권한이-아닌데\" style=\"position:relative;\"><a href=\"#-%EC%9A%B0%EB%A6%AC%EA%B0%80-%EA%B1%B4%EB%93%9C%EB%A6%B4-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%98%81%EC%97%AD%EA%B6%8C%ED%95%9C%EC%9D%B4-%EC%95%84%EB%8B%8C%EB%8D%B0\" aria-label=\" 우리가 건드릴 수 있는 영역권한이 아닌데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>+ 우리가 건드릴 수 있는 영역<del>권한</del>이 아닌데?</h3>\n<p>권한을 조정하면 bucket에서 bucket으로 직접 전송이 가능하기 때문에 불필요한 단계를 많이 건너뛸 수 있는데, 이를 할 수 없게 되었으니 다른 방법을 강구해야 했다.</p>\n<h1 id=\"charon\" style=\"position:relative;\"><a href=\"#charon\" aria-label=\"charon permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Charon</h1>\n<p>Ralph가 Boto3를 이용하여 만든 Worker</p>\n<p>이미 위와 같은 여러 좌절적인 케이스를 경험한 랄프는 S3 Import를 도와줄 워커를 직접 만들기로 결심한 것 같았다. (내가 팀에 합류한 이후에도 한번더 더 쉬운 방법이 없는지 물어보셨지만, 본인이 리서치한 결과와 크게 다르지 않아서 많이 실망하셨을 것 같다.)</p>\n<p>그리고 랄프가 만든 카론이 열심히 S3 Import 작업을 하고 있었다.</p>\n<ul>\n<li>Python</li>\n<li>pod에서 작동중 (m5.xlarge)</li>\n<li>import 속도 : 1초 약 1.3개</li>\n</ul>\n<p>하지만 카론의 속도로는 24시간 풀로 돌아가도, 모든 파일을 받아오는 데에 대략 <em>90여일</em>이 걸려 마감기한까지 데이터를 모두 받아올 수 없는 상황이었다.</p>\n<p>python 으로 되어있는 boto3와, 워커가 올라가 있는 인스턴스의 네트워크 대역폭이 가장 큰 한계점이라고 생각했다.</p>\n<h1 id=\"s5cmd\" style=\"position:relative;\"><a href=\"#s5cmd\" aria-label=\"s5cmd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>s5cmd</h1>\n<p>이 때 떠오른 것이 s5cmd 이다. go로 만들어져있고 여러 tcp 연결을 더 잘 활용하여 개체 저장소로 더 많은 데이터를 전송하여 매우 빠르다는 <a href=\"https://joshua-robinson.medium.com/s5cmd-for-high-performance-object-storage-7071352cc09d\">벤치마크 포스팅</a>을 본 기억이 나서 이를 차용해보기로 했다.</p>\n<p><a href=\"https://aws.amazon.com/ko/blogs/opensource/parallelizing-s3-workloads-s5cmd/\">Parallelizing S3 Workloads with s5cmd | Amazon Web Services</a></p>\n<h2 id=\"사용법\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"사용법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용법</h2>\n<p><img src=\"/401b126ad0fe7bda7a653a17a83e4462/2-s5cmd-3a.gif\" alt=\"s5cmd-3a.gif\"></p>\n<p>사용법은 간단하다. golang을 먼저 설치하고, s5cmd를 설치.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">go get <span class=\"token parameter variable\">-u</span> github.com/peakgames/s5cmd</code></pre></div>\n<p>s3를 이용할 AWS 계정의 Credentials file을 작성한다. <code class=\"language-text\">~/.aws/credetials</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>default<span class=\"token punctuation\">]</span>\naws_access_key_id <span class=\"token operator\">=</span> XXXXXXX\naws_secret_access_key <span class=\"token operator\">=</span> YYYYYYYY</code></pre></div>\n<h3 id=\"다운로드\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다운로드</h3>\n<p><strong>하나의 파일을 받을 때</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">s5cmd <span class=\"token function\">cp</span> s3://prod-wmg-s3delivery/DSP_7804/20210925132945877/ <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p><strong>여러개 파일을 받을 때</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">s3://prod-wmg-s3delivery/DSP_7804/20210925132945877/\ns3://prod-wmg-s3delivery/DSP_7804/20210925132945234/\ns3://prod-wmg-s3delivery/DSP_7804/20210925132342137/</code></pre></div>\n<p>와일드카드를 쓸 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">s5cmd <span class=\"token function\">cp</span> <span class=\"token string\">'s3://prod-wmg-s3delivery/DSP_7804/2021092513*'</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<h3 id=\"업로드\" style=\"position:relative;\"><a href=\"#%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"업로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>업로드</h3>\n<p><strong>하나의 파일만 올릴 때</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">s5cmd cp object.gz s3://music-distributor/wmg/New\\ Release/\n</code></pre></div>\n<p><strong>여러개 파일을 올릴 때</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/s5cmd cp '20210925*' s3://music-distributor/wmg/New\\ Release/\n</code></pre></div>\n<h3 id=\"주의할-점\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\" aria-label=\"주의할 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의할 점</h3>\n<p>이미 작업을 할 EC2 Instance에 데스티네이션 bucket에 대한 Role이 지정되어 있으므로, 인스턴스 내에서 <code class=\"language-text\">aws configure</code> 를 통해 credentials값을 재정의하면 EC2 Role이 덮어씌워짐.</p>\n<h2 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABK0lEQVQoz52Ry07CQBSG58lM3Hl5FN9LXcDCnTHAzkRlYQImEkpS24FWSqdXtJ1zZnpIW1MgtBu/xWTyn8v/Z4alaWqaJufctm3HcTjnpmk6jqO1LjrQBdVVRkS1RMccdev9hYiM1e/3JkKQjLqpN4aLZHDzGlvbUtGaiMR6EQYeADJdcepctZaiNwnuz5/ELCYq0xLRMjY84YJEBgCIqNtQqOrh/tXIn0VEpKBUguVP6CeIwBCx1bZx3kzD3sUwmMeN0sBq238OA4CqOAqsNCqlEOrYvcvhX2xUhzFZ12vtnT+i/vUomCctziffU56un75NLSVeClrb7/7d2aP4jDuHASCvyLIsl9Kw/YfBmE9uv6wxd4X1vErFVoLMy6LsdD4MnSMBaKKiq2UHLt2zdXEDQlYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0_80gJDQySaSwU9qWQ.png\"\n        title=\"0_80gJDQySaSwU9qWQ.png\"\n        src=\"/static/1dd71067f4a2568a21c9e013c57fc9a0/37523/3-0_80gJDQySaSwU9qWQ.png\"\n        srcset=\"/static/1dd71067f4a2568a21c9e013c57fc9a0/e9ff0/3-0_80gJDQySaSwU9qWQ.png 180w,\n/static/1dd71067f4a2568a21c9e013c57fc9a0/f21e7/3-0_80gJDQySaSwU9qWQ.png 360w,\n/static/1dd71067f4a2568a21c9e013c57fc9a0/37523/3-0_80gJDQySaSwU9qWQ.png 720w,\n/static/1dd71067f4a2568a21c9e013c57fc9a0/302a4/3-0_80gJDQySaSwU9qWQ.png 1080w,\n/static/1dd71067f4a2568a21c9e013c57fc9a0/c1b63/3-0_80gJDQySaSwU9qWQ.png 1200w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>우리가 받아야 하는 데이터는 평균 6.26MB 크기로, 대략 1000만개 이상의 mp3 파일들이다.</p>\n</blockquote>\n<ul>\n<li>Import 속도 :\n<ul>\n<li>(로컬) 1초 약 2.25개</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"c5nxlarge---네트워크-대역폭이-큰-인스턴스-사용\" style=\"position:relative;\"><a href=\"#c5nxlarge---%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EB%8C%80%EC%97%AD%ED%8F%AD%EC%9D%B4-%ED%81%B0-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%82%AC%EC%9A%A9\" aria-label=\"c5nxlarge   네트워크 대역폭이 큰 인스턴스 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>c5n.xlarge - 네트워크 대역폭이 큰 인스턴스 사용</h3>\n<p>회사에서 지급해준 맥북프로(i9 8core, 32GB)로 회사 네트워크를 사용하여 s5cmd를 통해 S3 Import를 할 때 걸린 시간은 초당 2.25개로 카론의 속도보다 약 2배 빨라졌음을 알 수 있었다. s5cmd의 성능이 로컬 테스트를 통해 어느정도 입증이 되어, 이를 더 좋은 환경에서 구동시켜 효율을 극대화 시키고자 했다.</p>\n<p>기존 카론이 돌아가는 m5.xlarge 사양의 pod이 아닌 네트워크 대역폭이 훨씬 큰 인스턴스를 사용하면 어떻게 될까?</p>\n<h4 id=\"m5xlarge-vs-c5nxlarge\" style=\"position:relative;\"><a href=\"#m5xlarge-vs-c5nxlarge\" aria-label=\"m5xlarge vs c5nxlarge permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>m5.xlarge vs. c5n.xlarge</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA2UlEQVQY03WQ227CMBBE8/9fVZWHChUQNIQ3bm8EycRJfImdy6Cx6lQGdaSVVuv12dnNzqcj1qvvEIvPD+x2WxyKPYp9juXyC5vNKtTz/AfUOI6YpikJKuaZlBXu9xJV9YCUEkopWGvnMMagriW01vhPEUplhF2vFxCcNo1wzs2TmRPedR2897/DNPq+T9xmznV4CBGaWIgrEUBXwzDAGhNyG4A2DG+aOgx4A7Ztg8v5BCFEciMCmVOEERRVljdorZLbzUA6U6qdP8QHOotw9nj/tz6dxY1egU8SjtDr1XDk9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5 2022 07 213 06 47\"\n        title=\"5 2022 07 213 06 47\"\n        src=\"/static/a8e883e23d6d9859d6f2515ec37dee61/37523/5-2022-07-213.06.47.png\"\n        srcset=\"/static/a8e883e23d6d9859d6f2515ec37dee61/e9ff0/5-2022-07-213.06.47.png 180w,\n/static/a8e883e23d6d9859d6f2515ec37dee61/f21e7/5-2022-07-213.06.47.png 360w,\n/static/a8e883e23d6d9859d6f2515ec37dee61/37523/5-2022-07-213.06.47.png 720w,\n/static/a8e883e23d6d9859d6f2515ec37dee61/302a4/5-2022-07-213.06.47.png 1080w,\n/static/a8e883e23d6d9859d6f2515ec37dee61/d4b10/5-2022-07-213.06.47.png 1394w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>C5n의 ENI(탄력적 네트워크 인터페이스)는 최대 32개의 대기열(C5 및 C5d의 경우 8개)을 사용을 통해 모든 vCPU들에 더욱 효율적으로 분산되는 패킷 처리 워크로드를 가능하게 합니다.</p>\n</blockquote>\n<ul>\n<li>Import 속도\n<ul>\n<li>(c5n.xlarge) 1초 약 11.48개</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACiklEQVQ4y51U30sUURTev6GHIIIoMkzrIUt6CXytp8joKQkKCy0VygfxSSjIH2lJRCJYkT5E5rrbhpmlpmYPGv1w/VG4/lpn1V1mdWZ2x507Ozt3vrh3zBXKXfLAx1zunPNxvvMdrkNRFKiqChamaaYFNSkSpgEjocNIxDegwzQTsCwLDp5EKSdkF6lAqcnzBmbacLfvHB4MFuD+4EXUfbyA2dVv/J8DG8EK0gW1bEKntwZXXu5FqSsbNzoP49qrA5gIDtiEuq4jFotxwnRymVQW7vF6FDsPodyTi1ue4yhzHcHEyqBNyBINw/gvye6JehR1ZHCym69zUOLKxmRwaCeS6faEoU82IeuOEGIXUJoSzEkWrvGthMdQ4spKSo7H49A0bQeEB/9NmE6mxcdhw9ycYcNfkqf+SObuJRJJl2kS9n5aW2Cm75BJZmuzXXvKuo61KMFaVEc4EoNGgE7vPRQ5M1JLZg6u6ypiusq/63oUxCC43vQFpyre43RVP/Iqe3C58TtaR2tR6s7ke1juOYEy99EtkjfmsijO4mx1DvJrc3G+7iTO3MlCnasC+dWj2FXQgf1XPdh9yYm8ys9oHq5CYfseFHdk8gUvbN8H73K/TUiIBjWqIhD041lPI55/eIjW3kdoedeA3q9v0Pr2B24/7UP9i2HUtA3hsXMUI75+dI01odv7BN3eFnSNNWNuZQrUtOCwkHqhLVMHUWVoUQmqEgbVyfa57LVhB7/ow88FLxbm/RDDIndjZFrE9JwfgiAgsLSMlWDIHo0yibmlXxCEABYFPwJLAnwzPsiynDQloslYU0TIkrzpeEgmkOQIJEmCJMlg7ybPJWHI0VUossLvIpEIRFHcrPsNmY+ycAQ6XUIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2021-11-08 오전 7.23.42.png\"\n        title=\"스크린샷 2021-11-08 오전 7.23.42.png\"\n        src=\"/static/bc4e0e2710ed6f88526725f7b7390fcb/37523/4-2021-11-087.23.42.png\"\n        srcset=\"/static/bc4e0e2710ed6f88526725f7b7390fcb/e9ff0/4-2021-11-087.23.42.png 180w,\n/static/bc4e0e2710ed6f88526725f7b7390fcb/f21e7/4-2021-11-087.23.42.png 360w,\n/static/bc4e0e2710ed6f88526725f7b7390fcb/37523/4-2021-11-087.23.42.png 720w,\n/static/bc4e0e2710ed6f88526725f7b7390fcb/c1c45/4-2021-11-087.23.42.png 824w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>S3 Import 속도가 비약적으로 증가했다. Charon 을 이용 했을 때보다 <strong>약 8.8배</strong> 속도 증가를 체감할 수 있었다.</p>\n<p>현재는 c5n.xlarge 인스턴스 2대를 이용하여 S3 Import 작업을 계속하고 있으며, 작업 착수일인 11월 2일부터 지금까지 약 376만여개의 객체를 받아올 수 있었다.</p>","frontmatter":{"date":"January 01, 2022","title":"s3 bucket에서 s3 bucket으로 약 1000만개 파일 옮기기","categories":"craft","author":"신나라","emoji":"💼"},"fields":{"slug":"/s3-to-s3/"}},"site":{"siteMetadata":{"siteUrl":"https://nara.dev","comments":{"utterances":{"repo":"narashin/narashin.github.io"}}}}},"pageContext":{"slug":"/worklight/","nextSlug":"/shieldee/","prevSlug":"/s3-to-s3/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}