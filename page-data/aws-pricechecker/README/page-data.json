{"componentChunkName":"component---src-templates-blog-template-js","path":"/aws-pricechecker/README/","result":{"data":{"cur":{"id":"94e4bd15-b928-5392-9f7f-53e249e25b3c","html":"<h1 id=\"aws-pricechecker---serverless-architecture\" style=\"position:relative;\"><a href=\"#aws-pricechecker---serverless-architecture\" aria-label=\"aws pricechecker   serverless architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS Pricechecker - Serverless Architecture</h1>\n<p>:::tip ì½”ë“œ\nì½”ë“œëŠ” íšŒì‚¬ ë¹Œë§ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆì–´ ê³µê°œê°€ ë¶ˆê°€í•˜ë‹¤. ì•„ì‰½ì§€ë§Œ ì•„í‚¤í…ì²˜ë§Œ ì„¤ëª…í•©ë‹ˆë‹¤.\n:::</p>\n<h2 id=\"0-ì‹œë‚˜ë¦¬ì˜¤\" style=\"position:relative;\"><a href=\"#0-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\" aria-label=\"0 ì‹œë‚˜ë¦¬ì˜¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. ì‹œë‚˜ë¦¬ì˜¤</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQoz32TP4/TMBjG861YYWfjE7Aw3woDJzEg2EAslAHE3+HU6RZUBmBDwHDSHTr+6O5a1CB6oUnaOE5ix84P1c0laXtgKXEcP+/v8Wu/9gDiOGY0Gi0+qapqrYf07V3K0bvl2Jpm7rzmLV6DwYBer+d+GLMM6Ab5L7aQX3Yb4P+aAwohCMOwWZmDdaDFwmhJo+pq6gy6Y++MnGd5B1j3QJn8IXp6Bf35fgNzujVzar0DltYwT8W5Kaj4lB/bFwhfb7eGWoBu9aY2WEAd8PTeLrPrz9FSMxvtEz+8iNp7hCxByYTZ8T5i8tOFWWOZPruKeHkZUyrCWc6bvfdkedCmfHzrFcNrDxwwOjlgePsS4uMTMgOmkGTjQ5e6W4et8HduMulvUZYaOc+QB5+wat4CS61RRdGkILMCY+tTtgYZ+Oh42pyw+BUTD6fttuB8nKHXLY/1cqmsxWqF+P4B4R+RJgmJVRzdeEx4p19rVuM9NsqgWn1KRRT8RsRTMCUWmHw9Ifg2xFjrNIEMMJVZLZuN1q1DpRBpSiolqRBkWiF1gUwlYRSyc9hnnPj/Bp7VYPcKbszXqeZ5zngyZhot9/Qv6iiZargagIsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./pricechecker-architecture.png\"\n        title=\"./pricechecker-architecture.png\"\n        src=\"/static/10e6eda99c0a4087a71fa44ce4c21225/37523/pricechecker-architecture.png\"\n        srcset=\"/static/10e6eda99c0a4087a71fa44ce4c21225/e9ff0/pricechecker-architecture.png 180w,\n/static/10e6eda99c0a4087a71fa44ce4c21225/f21e7/pricechecker-architecture.png 360w,\n/static/10e6eda99c0a4087a71fa44ce4c21225/37523/pricechecker-architecture.png 720w,\n/static/10e6eda99c0a4087a71fa44ce4c21225/bf433/pricechecker-architecture.png 971w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>AWS Pricelist APIê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ ì´ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬, ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œ ë’¤ Google Spreadsheet ì— ë„£ê³  ì‹¶ë‹¤. ì´ ì‘ì—…ì´ ì™„ë£Œ ë˜ë©´ Slackìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ ì•Œë¦¬ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ì‹¶ë‹¤.</li>\n</ul>\n<p>(1) Pricelist API ì—…ë°ì´íŠ¸ë¥¼ SNSë¡œ ë°›ëŠ”ë‹¤.</p>\n<p>(2) SNSëŠ” Fargate taskë¥¼ ëŒë¦´ ìˆ˜ ìˆëŠ” Lambdaë¥¼ íŠ¸ë¦¬ê±° í•œë‹¤.</p>\n<p>(3) LambdaëŠ” Fargate taskë¥¼ ëŒë¦¬ê³ , Containerì˜ ì‘ì—…ì´ ì™„ë£Œ ë˜ë©´ FargateëŠ” Stopped ëœë‹¤.</p>\n<p>(3-1) Google Spreadsheet ì— ë°ì´í„°ê°€ ë“¤ì–´ê°„ë‹¤.</p>\n<p>(3-2) Container ì‘ì—… ì™„ë£Œë¡œ Stoppedëœ ìƒí™©ì„ Cloudwatch Eventë¡œ ìºì¹˜í•œë‹¤.</p>\n<p>(4) (3-2)ë¥¼ í†µí•´ ìºì¹˜í•œ ìƒí™©ë¡œ Lambdaë¥¼ íŠ¸ë¦¬ê±° í•œë‹¤.</p>\n<p>(4-1) LambdaëŠ” ì—…ë°ì´íŠ¸ ìƒí™©ì„ Slackìœ¼ë¡œ ì•Œë ¤ì¤€ë‹¤.</p>\n<h2 id=\"1-pricelist-api-ì˜-ë³€ê²½ì„-snsìœ¼ë¡œ-ë°›ì•„ë³´ê¸°\" style=\"position:relative;\"><a href=\"#1-pricelist-api-%EC%9D%98-%EB%B3%80%EA%B2%BD%EC%9D%84-sns%EC%9C%BC%EB%A1%9C-%EB%B0%9B%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"1 pricelist api ì˜ ë³€ê²½ì„ snsìœ¼ë¡œ ë°›ì•„ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Pricelist API ì˜ ë³€ê²½ì„ SNSìœ¼ë¡œ ë°›ì•„ë³´ê¸°</h2>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/awsaccountbilling/latest/aboutv2/price-changes.html\">AWS Price List API ì‚¬ìš©</a></p>\n<p>AWSëŠ” ê°ì¢… ì„œë¹„ìŠ¤ ë° ë¦¬ì†ŒìŠ¤ì˜ ê°€ê²©ì„ Price List APIë¡œ ì œê³µí•œë‹¤.</p>\n<p>ì´ë¥¼ SNSìœ¼ë¡œ êµ¬ë…í•˜ë©´ (1) ë³€ê²½ ë  ë•Œ ë˜ëŠ” (2) í•˜ë£¨ì— í•œ ë²ˆ PriceList APIë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVQoz6VTa2+CQBDkp/vJ2PjDqtU+rIg1vo2ngHrHq4cHyDS3RbQptkm7yWTnXrN7c2AsbQ6XewUE2E5gs/fBPR+O62LrOLAdl7C1HdjuJQdhSPCDoMyGZVnomybMwQD3rTZGoxE63S5e+yaeez10H5/w/NKDObDQeugQ1/N6/VzkwDllLgSM3X5PJAwjBEUlzw/K6oSrDs4Io4hw5kFQdDiZTLHd2siyDEmSVCJNU8KFV++JogiGJj/F6XRCmmU4HhXyPKdxFfTau5Qw5osFGGNgbIM1Y1gsllivGZarFTzPI1GVKMx3M8hE0jhHXlmcBP3CL92BUoq4EIKMjuOYNmo7doc9jkp9Cub5N5SCA2uI4fAN0+kM4/EEoujq+qAW1D5LKcv56/giWKvV0Gjcodlsol6vo9Vug3MB19XfnkNGVx2+2aGMj/gtqq54U9D1Y/BIIU2z8rX+GiSojZcyhoz/D/1zfADS+5g+wCgAKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./aws-pricechecker_8.38.30.png\"\n        title=\"./aws-pricechecker_8.38.30.png\"\n        src=\"/static/3a5535f42bf536f393f284b07faae5d7/37523/aws-pricechecker_8.38.30.png\"\n        srcset=\"/static/3a5535f42bf536f393f284b07faae5d7/e9ff0/aws-pricechecker_8.38.30.png 180w,\n/static/3a5535f42bf536f393f284b07faae5d7/f21e7/aws-pricechecker_8.38.30.png 360w,\n/static/3a5535f42bf536f393f284b07faae5d7/37523/aws-pricechecker_8.38.30.png 720w,\n/static/3a5535f42bf536f393f284b07faae5d7/9a86a/aws-pricechecker_8.38.30.png 792w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>ë°˜ë“œì‹œ ë¯¸êµ­ ë™ë¶€(ë²„ì§€ë‹ˆì•„ ë¶ë¶€)ë¡œ ë¦¬ì „ì„ ì„ íƒí•  ê²ƒ <code class=\"language-text\">{ region : us-east-1 }</code></li>\n<li>êµ¬ë…ìœ¼ë¡œ ê¸°ì¡´ ì•Œë¦¼ ARN ì°¸ì¡°í•˜ê¸°\n<ul>\n<li>ì„œë¹„ìŠ¤ ê°€ê²© ë³€ê²½ì‹œë§ˆë‹¤ ì•Œë¦¼ ë°›ê¸° <code class=\"language-text\">arn:aws:sns:us-east-1:278350005181:price-list-api</code></li>\n<li>í•˜ë£¨ì— í•œë²ˆ ê°€ê²© ë³€ê²½ì— ëŒ€í•œ ì•Œë¦¼ ë°›ê¸° <code class=\"language-text\">arn:aws:sns:us-east-1:278350005181:daily-aggregated-price-list-api</code></li>\n<li>Savings Plans ê°€ê²© <code class=\"language-text\">arn:aws:sns:us-east-1:626627529009:SavingsPlanPublishNotifications</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-fargate-taskë¥¼-ì‹¤í–‰í•˜ê¸°\" style=\"position:relative;\"><a href=\"#2-fargate-task%EB%A5%BC-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"2 fargate taskë¥¼ ì‹¤í–‰í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Fargate taskë¥¼ ì‹¤í–‰í•˜ê¸°</h2>\n<h3 id=\"1-fargate\" style=\"position:relative;\"><a href=\"#1-fargate\" aria-label=\"1 fargate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) Fargate</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVQ4y5WU6Y7bMAyE8/6v1j9F0TaLRa5dX+sjtnVYls8pRrFct0g3KQFCjEN/GlKUd0VRIMtypGmKOI6RZRnatsX/2DzPq+/yPMdHkiCOI4RBgCxNUZUltFZQUjpvmgZaa0gpYYxxsVLKrdycoGmanO9s10MZC206CG1QS41SKFRSQ6gGtWqgTQtr2xVGMNe6rt3qgU6h7iZc2xliAKJS48u3Pb7ujwivCnIASgvItnel8SW25XK5gJWdTidEUeT+G4bhplB3I0o7o+6Asp3wconw+p6gspN7VllAmB7zPGFeelaWJc7n8x+9HsfxL+ACDQuJQ5jiQ7QQDjhDLkB/ALSqqmCt/QS4KDzFOV7fErxl1apwC/QmhHBlfgpUIxbIDNH/jj2Q6ngI1+sVHDeWTqfS9ZRVN6LqgKIZ8f34jh/HAPtzhJ+nELnuUfe3HmIplUr6vncrFTLmRqtCQ6DpoXja0iAXDbJKuZjPajNAtzeAd6/Gu4e7sXEJ44gkuY1DFIYQonZxEAQuySc/ctqOO9Aonf05HA5u1hh3XbfO2LNXcOcn3BtvAe/zNulZhXeBjHlPt7ZVuM29Z2vJnHp+BDhfVMiYYMLYZw96Gsh+sW8EeTh/+5N9GujH4F+Jvofb795DhdsZu+e+ikcwAn8BNjh+NZuR2fUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./aws-pricechecker_5.59.52.png\"\n        title=\"./aws-pricechecker_5.59.52.png\"\n        src=\"/static/ab790bfe025f021c9a100c28a3122edf/37523/aws-pricechecker_5.59.52.png\"\n        srcset=\"/static/ab790bfe025f021c9a100c28a3122edf/e9ff0/aws-pricechecker_5.59.52.png 180w,\n/static/ab790bfe025f021c9a100c28a3122edf/f21e7/aws-pricechecker_5.59.52.png 360w,\n/static/ab790bfe025f021c9a100c28a3122edf/37523/aws-pricechecker_5.59.52.png 720w,\n/static/ab790bfe025f021c9a100c28a3122edf/63ec5/aws-pricechecker_5.59.52.png 812w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>ë¨¼ì € í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œë‹¤\n<ul>\n<li>í´ëŸ¬ìŠ¤í„° ì´ë¦„, VPC ìƒˆ ìƒì„± ì—¬ë¶€ ë“±ì„ ì„¤ì •</li>\n</ul>\n</li>\n<li>ECRì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ ECS on Fargateìš© Imageë¡œ ì‚¬ìš©í•œë‹¤\n<ul>\n<li>Docker ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦¬ê¸° ìœ„í•´ Dockerfileì„ ë¯¸ë¦¬ ì‘ì„±í•˜ì—¬ ECR ì— í‘¸ì‹œ</li>\n</ul>\n</li>\n<li>ECSì˜ <strong>ì˜ˆì•½ëœ ì‘ì—…</strong>ì˜ ê²½ìš° Cloudwatch Eventì—ì„œ ì§€ì›í•˜ëŠ” ì´ë²¤íŠ¸ì—ë§Œ(ë˜ëŠ” Cronì¡ ê°€ëŠ¥) ê±¸ ìˆ˜ ìˆìœ¼ë¯€ë¡œ(SNSë¡œ ë°›ëŠ” êµ¬ë…ì— ëŒ€í•´ì„œëŠ” ë¶ˆê°€) Lambdaë¡œ íŠ¸ë¦¬ê±° í•œë‹¤</li>\n</ul>\n<h3 id=\"2-lambda\" style=\"position:relative;\"><a href=\"#2-lambda\" aria-label=\"2 lambda permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) Lambda</h3>\n<p>SNSë¡œ íŠ¸ë¦¬ê±° ë  Lambda í•¨ìˆ˜ë¡œì„œ, ECS Taskë¥¼ Run ì‹œí‚¨ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token constant\">AWS</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'aws-sdk'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">handler</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> ecs <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWS<span class=\"token punctuation\">.</span>ECS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">apiVersion</span><span class=\"token operator\">:</span> <span class=\"token string\">'2014-11-13'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">region</span><span class=\"token operator\">:</span> <span class=\"token string\">'ap-northeast-2'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> params <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">cluster</span><span class=\"token operator\">:</span> <span class=\"token string\">'í´ëŸ¬ìŠ¤í„°ëª…'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">launchType</span><span class=\"token operator\">:</span> <span class=\"token string\">'FARGATE'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">taskDefinition</span><span class=\"token operator\">:</span> <span class=\"token string\">'ì‘ì—…:(latestëŠ” ë¶ˆê°€. íŠ¹ì • ë²„ì „ ìˆ«ìë¥¼ ë„£ì–´ì•¼í•¨)'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">networkConfiguration</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">awsvpcConfiguration</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">assignPublicIp</span><span class=\"token operator\">:</span> <span class=\"token string\">'ENABLED'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">subnets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ì„œë¸Œë„·ID'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ì„œë¸Œë„·ID'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">securityGroups</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ë³´ì•ˆê·¸ë£¹ID'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> ecs<span class=\"token punctuation\">.</span><span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a href=\"https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_RunTask.html\">RunTask</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVQoz4WRiY7CMBBD+/9fCAJK75tCDyhQqFdvVkEVWmkrWUmTicf2eJtjpqa96BBmitJSWZbJ931FUaQwDBXHsfb7ve3rulbTNHq9XuJ7v9+6XC46nU7q+15d18uLo0BBcNTRPyjxN2rrUn0/WME4jobz+ay2bY2QPUTLshgx/zSBeBx6eff7XeDxeGien5IW/fdB6ADx79mippvk0QUyVgpY16DZNE26TXf1w2hKUeVUd12nc9ua7aQ4ybvdbnaBtev1+rHpQGHT1MqKSmmWqygKVVWlsiwN3BMFZ2aZrBjCdrvVbrdTFCcKglBJknweUVwUuaqqtMfrc7cH3FmGeZ7bdCHBHorTNLUCVu5ZCR4Xz+fT4PJfz8Gb5/mTCdMiZKxijX+wVkSTYRiMmNpveHSiCEDCIIgBxZCgzhGhAEBG9m6QaxihU8JDDpkcFp06Z5koiIQPNd9kRugsUww4xJKzzB2N2DsnqPyLDMIfIHhJAN2wriUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./aws-pricechecker_10.51.31.png\"\n        title=\"./aws-pricechecker_10.51.31.png\"\n        src=\"/static/61b374e43767b34f7d28fe3de5243acb/37523/aws-pricechecker_10.51.31.png\"\n        srcset=\"/static/61b374e43767b34f7d28fe3de5243acb/e9ff0/aws-pricechecker_10.51.31.png 180w,\n/static/61b374e43767b34f7d28fe3de5243acb/f21e7/aws-pricechecker_10.51.31.png 360w,\n/static/61b374e43767b34f7d28fe3de5243acb/37523/aws-pricechecker_10.51.31.png 720w,\n/static/61b374e43767b34f7d28fe3de5243acb/20751/aws-pricechecker_10.51.31.png 1037w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"3-cloudwatchë¡œ-ì‘ì—…ì™„ë£Œë¥¼-íŒŒì•…í•˜ì—¬-slackìœ¼ë¡œ-ì•Œë ¤ì£¼ê¸°\" style=\"position:relative;\"><a href=\"#3-cloudwatch%EB%A1%9C-%EC%9E%91%EC%97%85%EC%99%84%EB%A3%8C%EB%A5%BC-%ED%8C%8C%EC%95%85%ED%95%98%EC%97%AC-slack%EC%9C%BC%EB%A1%9C-%EC%95%8C%EB%A0%A4%EC%A3%BC%EA%B8%B0\" aria-label=\"3 cloudwatchë¡œ ì‘ì—…ì™„ë£Œë¥¼ íŒŒì•…í•˜ì—¬ slackìœ¼ë¡œ ì•Œë ¤ì£¼ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Cloudwatchë¡œ ì‘ì—…ì™„ë£Œë¥¼ íŒŒì•…í•˜ì—¬ Slackìœ¼ë¡œ ì•Œë ¤ì£¼ê¸°</h2>\n<ul>\n<li>Taskë‚´ì˜ ì´ë¯¸ì§€ê°€ ì‘ì—…ì„ ë§ˆì¹˜ê³  ì»¨í…Œì´ë„ˆê°€ ë‚´ë ¤ì˜¤ë©´, ECS Taskë„ í•¨ê»˜ Stopped ë˜ëŠ”ë° ì´ë¥¼ ìºì¹˜í•˜ê¸° ìœ„í•œ ì´ë²¤íŠ¸ ê·œì¹™ ì •í•œë‹¤.</li>\n<li>ì´ ê·œì¹™ì„ í†µí•´ ì›í•˜ëŠ” ì‘ì—…ì´ ì™„ë£Œ ë˜ì—ˆìŒì„ ìºì¹˜í•˜ì—¬, Slack ë“±ì˜ ì•Œë¦¼ ì„œë¹„ìŠ¤ë¡œ ì•Œë ¤ì¤„ ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<h3 id=\"1-cloudwatch-events\" style=\"position:relative;\"><a href=\"#1-cloudwatch-events\" aria-label=\"1 cloudwatch events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) Cloudwatch Events</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQ4y51T7WrCQBDM+7+CIIK/RRR8AR/CD0JBbWLiR3L5TrwkTpktF5JiS9uFcePlbjI7u2e1bQvf93E+nxHHMS6XC6bTKcbjMSaTCUajEVarFaIoQhiGuN/vSNMUPNc0zQBcs/hDoqIooJSSA2VZCrj2F1RVBQu9CIJAlDJTEZVkWSbI8/xbkIyZIqzn8wkDErF8EnFTXdddaUaxyYbIYEDIYGbJnudhvV5jNpthsVhgPp9juVzKh5IkkT3mg33Sl4Q8cDqdsN/vsdlssN1uBbvdTtTTa2PFK0Lx0BAysjSF67pyUGstJRt8bdIrLwcK6VMQh1La9XrtGsNRoXLT+Z/weDw+uywN4YwVqt909Bv2W4jCR1XJQMd5DZVrVLrBf8O63W5iJoMjImNi0LSDW9B/7oOizHuLTaBPNJoDnCYJijxDWeSSI6UEvEH0lKC/FMJzZnb5nrAcx4Ft292i/XbA2/GMg+Pj8O4JXP8mewjeJJIdj0dpHueW6+QRQo4E54qZUeoGaVkjKbRkotStVBAq1dnTb1r//wcNtjHvtaB6NgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./aws-pricechecker_10.34.21.png\"\n        title=\"./aws-pricechecker_10.34.21.png\"\n        src=\"/static/07ae8d7436116e2f5ee6693620dd1e84/37523/aws-pricechecker_10.34.21.png\"\n        srcset=\"/static/07ae8d7436116e2f5ee6693620dd1e84/e9ff0/aws-pricechecker_10.34.21.png 180w,\n/static/07ae8d7436116e2f5ee6693620dd1e84/f21e7/aws-pricechecker_10.34.21.png 360w,\n/static/07ae8d7436116e2f5ee6693620dd1e84/37523/aws-pricechecker_10.34.21.png 720w,\n/static/07ae8d7436116e2f5ee6693620dd1e84/9c177/aws-pricechecker_10.34.21.png 880w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Cloudwatch Event â†’ ê·œì¹™ ì—ì„œ ì´ë²¤íŠ¸ íŒ¨í„´ì„ ì„¤ì •í•œë‹¤.\n<ul>\n<li>ecs, Task State Change, STOPPED, (Essential container in task exited)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-slack\" style=\"position:relative;\"><a href=\"#2-slack\" aria-label=\"2 slack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) Slack</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuUlEQVQY042PTWrDMBSEff2uC71KD9F9uiiW3MhUP7UTS5Ftqlj+imSyLHRgeMPMMPCaJF4R6oyUAiklzjlCCHjvSemHgn3f+S+a+PbE8/sLp48TnZD0SmGM4bPrsNaitWYcL6T7xpZ3tpy551z1cTO5+kfWlFUdrrQ2cB4iwnpa61HDjc4FWjMhjGe4rejrjJkW+jFWfl3myuKV7Dusx2BcEv04V1ONEV0K04L1K86vtfh4/cH8h/4FwAQyNR0BukMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./aws-pricechecker_10.51.55.png\"\n        title=\"./aws-pricechecker_10.51.55.png\"\n        src=\"/static/f2d43bc27df8604e8a41d3ee16bb1f0d/37523/aws-pricechecker_10.51.55.png\"\n        srcset=\"/static/f2d43bc27df8604e8a41d3ee16bb1f0d/e9ff0/aws-pricechecker_10.51.55.png 180w,\n/static/f2d43bc27df8604e8a41d3ee16bb1f0d/f21e7/aws-pricechecker_10.51.55.png 360w,\n/static/f2d43bc27df8604e8a41d3ee16bb1f0d/37523/aws-pricechecker_10.51.55.png 720w,\n/static/f2d43bc27df8604e8a41d3ee16bb1f0d/302a4/aws-pricechecker_10.51.55.png 1080w,\n/static/f2d43bc27df8604e8a41d3ee16bb1f0d/9239a/aws-pricechecker_10.51.55.png 1246w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Slack Webhookì„ ì´ìš©í•˜ì—¬ ì‘ì—… ì™„ë£Œ Messageë¥¼ ë³´ë‚¸ë‹¤.</p>","excerpt":"AWS Pricechecker - Serverless Architecture :::tip ì½”ë“œ\nì½”ë“œëŠ” íšŒì‚¬ ë¹Œë§ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆì–´ ê³µê°œê°€ ë¶ˆê°€í•˜ë‹¤. ì•„ì‰½ì§€ë§Œ ì•„í‚¤í…ì²˜ë§Œ ì„¤ëª…í•©ë‹ˆë‹¤.\n::: 0. ì‹œë‚˜ë¦¬ì˜¤  AWS Pricelist APIê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ ì´ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬, ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œ ë’¤ Google Spreadsheet ì— ë„£ê³  ì‹¶ë‹¤. ì´ ì‘ì—…ì´ ì™„ë£Œ ë˜ë©´ Slackìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ ì•Œë¦¬ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ì‹¶ë‹¤. (1) Pricelist API ì—…ë°ì´íŠ¸ë¥¼ SNSë¡œ ë°›ëŠ”ë‹¤. (2) SNSëŠ” Fargate taskë¥¼ ëŒë¦´ ìˆ˜ ìˆëŠ” Lambdaë¥¼ íŠ¸ë¦¬ê±° í•œë‹¤. (3) LambdaëŠ” Fargate taskë¥¼ ëŒë¦¬ê³ , Containerì˜ ì‘ì—…ì´ ì™„ë£Œ ë˜ë©´ FargateëŠ” Stopped ëœë‹¤. (3-1) Google Spreadsheet ì— ë°ì´í„°ê°€ ë“¤ì–´ê°„ë‹¤. (3-2) Container ì‘ì—… ì™„ë£Œë¡œ Stoppedëœ ìƒí™©ì„ Cloudwatch Eventë¡œ ìºì¹˜í•œë‹¤.â€¦","frontmatter":{"date":"Invalid date","title":"AWS Price Checker","categories":"craft","author":"ì‹ ë‚˜ë¼","emoji":"ğŸ”¨"},"fields":{"slug":"/aws-pricechecker/README/"}},"next":null,"prev":{"id":"c7f08b0b-60aa-5f57-a588-2f6eb7bc320e","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQoz52SS2/TQBSF89/5H92wZRUJFlRsKCs2KAmiSpuapITGNn40L4/ncedDsZ1JTKsKuNJ4rPGdb84ZnwFnpbVuZu99GP9ag+OmPM8ZDodUVRWg/1MBaIwhiiLW6/WzKv/2gMGxuSgK4jgmyzKcc72mE7R7nMH/PDQoTNO0AR5ghzVrbaP6MPeh0lPvRZq1ADy8iBfSJGF6uyArFXslLB+yZihlTsAXbB+hDdBZYVPueFgmpHFO3UG0Nry6+Mh630GB3dUHzHKBFo9xnuTygmr8vv0urgVaLaxWMZOvE66/XVPt6qZhs93y7mpCXrY/yonwczziMYmxzrFXNfPL15TTz0FlABZ5SRTdMZ8vUHvd3ZEcDTUwEenZFHHUAsq45i6DZaMFVSlms1vKssQZ3xr0nrdfLDerE2h0XzNZqBboeZKGoHC73jO7+c6vJEdtLVpZ1E7z5lPJ+G4H1lFtKkbTmNmP4oDrEtTPa8ihNcJjWmFqh8hZmL0GaaOjjaHIEoosxVr3bOB/A854pxdRNqG9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"efish-architecture\"\n        title=\"efish-architecture\"\n        src=\"/static/227c370838b062ddaa19856caceca58e/37523/efish-architecture.png\"\n        srcset=\"/static/227c370838b062ddaa19856caceca58e/e9ff0/efish-architecture.png 180w,\n/static/227c370838b062ddaa19856caceca58e/f21e7/efish-architecture.png 360w,\n/static/227c370838b062ddaa19856caceca58e/37523/efish-architecture.png 720w,\n/static/227c370838b062ddaa19856caceca58e/302a4/efish-architecture.png 1080w,\n/static/227c370838b062ddaa19856caceca58e/07a9c/efish-architecture.png 1440w,\n/static/227c370838b062ddaa19856caceca58e/3a5d5/efish-architecture.png 1807w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>","frontmatter":{"date":"Invalid date","title":"Efish","categories":"craft","author":"ì‹ ë‚˜ë¼","emoji":"ğŸ”¨"},"fields":{"slug":"/efish/README/"}},"site":{"siteMetadata":{"siteUrl":"https://nara.dev","comments":{"utterances":{"repo":"narashin/narashin.github.io"}}}}},"pageContext":{"slug":"/aws-pricechecker/README/","nextSlug":"","prevSlug":"/efish/README/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}