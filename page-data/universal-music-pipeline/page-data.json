{"componentChunkName":"component---src-templates-blog-template-js","path":"/universal-music-pipeline/","result":{"data":{"cur":{"id":"4ca27750-f3c2-54a3-a017-4a56749035f9","html":"<h2 id=\"파이프라인-구성-아키텍처\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B5%AC%EC%84%B1-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\" aria-label=\"파이프라인 구성 아키텍처 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파이프라인 구성 아키텍처</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 629px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 128.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADTklEQVRIx5VVy27TQBT1F/E3fAFbFiwQAiRW7NmwYoPYILHhISoQokCLoJQFLYQkJc2jiZ34Eb9jJ37bB92b2MRtCnSk8djjmXPPPXPvHQEAiqJA2UzTxNbWFgaDQTW3/v9fTSgX53kO13Wg6zqGwyEkSYLrukiS5EKgQrFcDRozAgbgeR7SNGMj1C8GuAKjnnx8gEw8gGY6CIMFg/H/Fdj/gArri5KjbZi9Q6i6CdMwEATBhXUUUCzdIjd1x2Mw0lE3DR4ty6rpmOVnGa8bE+hBi6aaBnky4VESJYzax1BlBYqiYLFYnGFyWoryXcjVDookqC22dAPG1yMgymrzWZ7jW1eDH6bnSiEsnt5CoHQRJBnmvsehQqwsx4bv+6wjMYyjCEEY4fLd53i914QsDWE7To0hdWHhmsjzJRPSSpZl1o7cJ13LVh6QqlsYjkY4OTnhJDijYRgl1USapsyGFs5mM8RxXP2Logi2baPXPWYwURR5dBynzjAMAmRZVm0koPl8ziMZKBuxpc3UNU2Dqir8TuvW3RbCMGRWZL3f77O79G0YBn+PRqOlppZVGc3SBIN+D61WC81mk/eWoAJpQ51cGo/HHJPEkAAmkwkXCZonViXjeZxDNR02TMxpbwVI7tLmXq/HmhAAjeV7yZCMFKvDm7d3MGu85XRNk4S1LmVbBnaWsbVNnYBKBlU8Nl9De/8QkjKFpqmYTqdVFAj/m6MkheO6sC0L+izAYKxxvhumyYAkCXkqnA7Mv3XT0KHbM3TfPMLx9mPo1vLESRJVXTIVzmO0nqeUcvmaJ357B+PDD/CDCI5j1wqxcF6Sb8rTstgS0K9uH4oscyRQdacw40PZVIKKVWGlFmcptsUOBq7x594xDLSaP9FuH6Hb7XI8UuaQQWEdLAkCFHH9RO1gjkv3buP+57fV3CKOYa0yhFyl+Cyr+xpDoHXjKnauXoHnzbiSNBoN/Gg08PLDO+zuf8H3g0OIiorJ/idMdt8tr46VDLUrgOIwShK07lzH3s1r8Hyf44/SkjryHFmS8j1D0ouvXkB89gReGCFcxV+Vy0SVhB2JIvqrzBAlicOh0nRDFAwkifU7fSv+NbA3xSJXdNPEUbuNTqeDQb9fq4u/ARJyzz8A5nRwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"architecture\"\n        title=\"architecture\"\n        src=\"/static/c4305c6f5081fff829c59e18aca24c1e/63a68/1-universal_final_pipeline.png\"\n        srcset=\"/static/c4305c6f5081fff829c59e18aca24c1e/e9ff0/1-universal_final_pipeline.png 180w,\n/static/c4305c6f5081fff829c59e18aca24c1e/f21e7/1-universal_final_pipeline.png 360w,\n/static/c4305c6f5081fff829c59e18aca24c1e/63a68/1-universal_final_pipeline.png 629w\"\n        sizes=\"(max-width: 629px) 100vw, 629px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"아키텍처-설명\" style=\"position:relative;\"><a href=\"#%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EB%AA%85\" aria-label=\"아키텍처 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>아키텍처 설명</h2>\n<ol>\n<li><code class=\"language-text\">GET Order IDs</code> :: Lambda\n<ol>\n<li>UCS 에 공개된 데이터를 받아온다.</li>\n<li>받아온 데이터는 Log에 저장 되며 이는 CloudWatch Logs Subscribe Filter를 거쳐 Order ID가 있을 경우 CHECK Order ID를 트리거 한다.</li>\n</ol>\n</li>\n<li><code class=\"language-text\">CHECK Order ID</code> :: Lambda\n<ol>\n<li>Order ID를 기처리 여부를 판단한다.</li>\n<li>처리 할 데이터는 DynamoDB Table에 기록되며(최대 1일간 보관됨), 기 처리된 데이터는 이미 기록되어있으므로 파이프라인이 이대로 종료된다.\n<ol>\n<li>DynamoDB에 기록되는 데이터는 DynamoDB Stream에 의해 상태(Insert, Modify, Delete)가 감지된다.</li>\n</ol>\n</li>\n<li>Insert 상태가 감지되면 ECS Task를 트리거 한다.</li>\n</ol>\n</li>\n<li><code class=\"language-text\">TRIGGER ECS Task</code> :: Lambda\n<ol>\n<li>2에서 트리거 된 정보가 그대로 넘어와 ECS Task를 활성화 시킨다.</li>\n</ol>\n</li>\n<li><code class=\"language-text\">GET Universal Music</code> :: ECS Task\n<ol>\n<li>ECS Task는 Order ID에 따른 파일들을 받아와 EFS에 저장하는 작업을 수행한다.</li>\n</ol>\n</li>\n<li>DataSync\n<ol>\n<li>DataSync는 주기적으로 EFS의 데이터를 S3에 옮기는 작업을 수행한다.</li>\n</ol>\n</li>\n</ol>","excerpt":"파이프라인 구성 아키텍처  아키텍처 설명  :: Lambda UCS 에 공개된 데이터를 받아온다. 받아온 데이터는 Log에 저장 되며 이는 CloudWatch Logs Subscribe Filter를 거쳐 Order ID가 있을 경우 CHECK Order ID를 트리거 한다.  :: Lambda Order ID를 기처리 여부를 판단한다. 처리 할 데이터는 DynamoDB Table에 기록되며(최대 1일간 보관됨), 기 처리된 데이터는 이미 기록되어있으므로 파이프라인이 이대로 종료된다. DynamoDB에 기록되는 데이터는 DynamoDB Stream에 의해 상태(Insert, Modify, Delete)가 감지된다. Insert 상태가 감지되면 ECS Task를 트리거 한다.  :: Lambda 2에서 트리거 된 정보가 그대로 넘어와 ECS Task를 활성화 시킨다.  :: ECS Task ECS Task는 Order ID에 따른 파일들을 받아와 EFS에 저장하는 작업을 수행한다. …","frontmatter":{"date":"January 01, 2022","title":"협력 업체 음원 수급 자동화를 위한 파이프라인 만들기 B (구성하기)","categories":"craft","author":"신나라","emoji":"🔨"},"fields":{"slug":"/universal-music-pipeline/"}},"next":{"id":"9d1d3aba-dc56-5eda-96d7-e10f8da76bcc","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABKklEQVQoz1VQ2W6EMAzc//+yqi+00EKLlsK24QohJFmVc2EqWwLRh5Fjxx7P+JKlH7BJBJN9odEaVVUhjmNkWYbb7cZ5WZbIhYBUGtL2qLSDMncMw4BxHI9IuCzLiC7/QfziQeQ5DzdNw3GHEDnyXOBbFHj9TJGVCrK7o+8HJjvjMs8LiqrGWxhBKYW2bZnEWovH44FlWRjbtkHrFu+BD2c7YFu5Ps/zf4VUKIsCvu+jrms466C1hnPu2Nr3PaZp4mW+H+B6TXjhuq5MeLbNhFVZIQgCbo6iiD+J4GyFclrkeR7SND2U7wpPlmdI1eCaJGxZSnkQnEHDxhiEYcg9pI5AZ9l7WOGEFfopgnwOYYdfWGPRdR0PUyRVpjOc05ts05ss01ko7n10mj9poRL7hLuHlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./ssm-watcher_4.21.16.png\"\n        title=\"./ssm-watcher_4.21.16.png\"\n        src=\"/static/3e0ca133b4f8d31772ce269e5b5c22da/37523/ssm-watcher_4.21.16.png\"\n        srcset=\"/static/3e0ca133b4f8d31772ce269e5b5c22da/e9ff0/ssm-watcher_4.21.16.png 180w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/f21e7/ssm-watcher_4.21.16.png 360w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/37523/ssm-watcher_4.21.16.png 720w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/302a4/ssm-watcher_4.21.16.png 1080w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/393aa/ssm-watcher_4.21.16.png 1190w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h1 id=\"0-목적\" style=\"position:relative;\"><a href=\"#0-%EB%AA%A9%EC%A0%81\" aria-label=\"0 목적 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. 목적</h1>\n<p>AWS Session Manager를 통해 접근하는 인스턴스(접근 대상)와 접근 주체, 접근 시간, 접근 장소(Source IP)를 알려준다.</p>\n<h1 id=\"1-code-classlanguage-textsettingymlcode\" style=\"position:relative;\"><a href=\"#1-code-classlanguage-textsettingymlcode\" aria-label=\"1 code classlanguage textsettingymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <code class=\"language-text\">setting.yml</code></h1>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">SLACK_WEBHOOK_URL<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span> #SLACK WEBHOOK URL\nREGION<span class=\"token operator\">:</span> ap-northeast<span class=\"token number\">-2</span> #Target Region</code></pre></div>\n<h1 id=\"2-그외\" style=\"position:relative;\"><a href=\"#2-%EA%B7%B8%EC%99%B8\" aria-label=\"2 그외 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 그외</h1>\n<p>SSM Watcher는 Serverless Framework를 이용하여 만들어졌으며 기본적으로 Serverless Framework가 설치되어 있는 환경에서 deploy 가능합니다.</p>\n<blockquote>\n<p><a href=\"https://www.serverless.com/\">https://www.serverless.com/</a></p>\n</blockquote>\n<hr>\n<p>:::tip\n설치를 하고 싶다면\n:::</p>\n<h1 id=\"ssm-watcher-사용방법\" style=\"position:relative;\"><a href=\"#ssm-watcher-%EC%82%AC%EC%9A%A9%EB%B0%A9%EB%B2%95\" aria-label=\"ssm watcher 사용방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSM-Watcher 사용방법</h1>\n<ol>\n<li>serverless framework 설치</li>\n</ol>\n<p><a href=\"https://www.serverless.com/framework/docs/getting-started/\">Serverless Getting Started Guide</a></p>\n<ol start=\"2\">\n<li>본 프로그램을 돌릴 로컬환경에서 AWS Config/Credential 설정(세션</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ~/.aws/credential</code></pre></div>\n<ul>\n<li><code class=\"language-text\">credentials</code> 에서 Access key와 Secret Access key 설정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ~/.aws/config</code></pre></div>\n<ul>\n<li><code class=\"language-text\">config</code> 에서 region, profile 설정</li>\n</ul>\n<ol start=\"3\">\n<li><code class=\"language-text\">git clone</code></li>\n</ol>\n<p><a href=\"https://github.com/narashin/ssm-watcher\">GitHub - narashin/ssm-watcher: Tool to detect when your session is activated.</a></p>\n<ol start=\"4\">\n<li>clone한 폴더 내에서 <code class=\"language-text\">npm i</code> 로 패키지 설치</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> i</code></pre></div>\n<ol start=\"5\">\n<li><code class=\"language-text\">setting.yml</code> 수정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">SLACK_WEBHOOK_URL</span><span class=\"token punctuation\">:</span> <span class=\"token string\">''</span> <span class=\"token comment\">#SLACK WEBHOOK URL</span>\n<span class=\"token key atrule\">REGION</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span> <span class=\"token comment\"># Target Region</span>\n<span class=\"token key atrule\">PROFILE</span><span class=\"token punctuation\">:</span> default <span class=\"token comment\"># 사용할 AWS Profile (2에서 설정)</span></code></pre></div>\n<ul>\n<li>SLACK_WEBHOOK_URL : 알림을 받을 Slack Webhook URL 설정</li>\n<li>REGION : 사용할 Region 설정</li>\n<li>PROFILE : 사용할 AWS Profile 설정</li>\n</ul>\n<ol start=\"6\">\n<li><code class=\"language-text\">sls deploy</code> 로 배포</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ sls deploy</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/0lEQVQoz42Q226DMBAFDyQkQIBwCbZrY3r7/2+cyriV+tKoD0drWas5o1VXjVg3EEKLNRdO1zO6DajrUduhPr0H1FRoEHVbUhZC+iOrNcQt4sOOtTXWiHUR0yjmUVwrHYDqLM7lE9BPrLU4ZxnHiWURexQxCmvF6y5CEOsqgs9/8yzKZ+AQAvseMcbifcHnh9h3YYyIm3BO3G45TSPaVlwvGZqsTydxueR5AI0xOOeYppnHIxu9uAw0q5gmMfSi7zMw5QfefRelnVR0AL33bNt2GIaQDZPV+5t4LHkx2SSDovjHDbfNE2Okrhv6rjjaks39LoZBjGOey/LL4km+AHJJmtBwYXq9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./ssm-watcher_1.15.08.png\"\n        title=\"./ssm-watcher_1.15.08.png\"\n        src=\"/static/44011bf9b9123ae4b319fba8cc3df46e/37523/ssm-watcher_1.15.08.png\"\n        srcset=\"/static/44011bf9b9123ae4b319fba8cc3df46e/e9ff0/ssm-watcher_1.15.08.png 180w,\n/static/44011bf9b9123ae4b319fba8cc3df46e/f21e7/ssm-watcher_1.15.08.png 360w,\n/static/44011bf9b9123ae4b319fba8cc3df46e/37523/ssm-watcher_1.15.08.png 720w,\n/static/44011bf9b9123ae4b319fba8cc3df46e/3dde1/ssm-watcher_1.15.08.png 1018w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"7\">\n<li>세션 매니저를 통해 세션이 시작되면,</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABKklEQVQoz1VQ2W6EMAzc//+yqi+00EKLlsK24QohJFmVc2EqWwLRh5Fjxx7P+JKlH7BJBJN9odEaVVUhjmNkWYbb7cZ5WZbIhYBUGtL2qLSDMncMw4BxHI9IuCzLiC7/QfziQeQ5DzdNw3GHEDnyXOBbFHj9TJGVCrK7o+8HJjvjMs8LiqrGWxhBKYW2bZnEWovH44FlWRjbtkHrFu+BD2c7YFu5Ps/zf4VUKIsCvu+jrms466C1hnPu2Nr3PaZp4mW+H+B6TXjhuq5MeLbNhFVZIQgCbo6iiD+J4GyFclrkeR7SND2U7wpPlmdI1eCaJGxZSnkQnEHDxhiEYcg9pI5AZ9l7WOGEFfopgnwOYYdfWGPRdR0PUyRVpjOc05ts05ss01ko7n10mj9poRL7hLuHlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./screenshot.png\"\n        title=\"./screenshot.png\"\n        src=\"/static/3e0ca133b4f8d31772ce269e5b5c22da/37523/screenshot.png\"\n        srcset=\"/static/3e0ca133b4f8d31772ce269e5b5c22da/e9ff0/screenshot.png 180w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/f21e7/screenshot.png 360w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/37523/screenshot.png 720w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/302a4/screenshot.png 1080w,\n/static/3e0ca133b4f8d31772ce269e5b5c22da/393aa/screenshot.png 1190w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위와 같은 알림 발송</p>","frontmatter":{"date":"January 01, 2022","title":"SSM Watcher","categories":"craft","author":"신나라","emoji":"🔨"},"fields":{"slug":"/ssm-watcher/"}},"prev":{"id":"74eb8743-f5e1-52cf-bdac-f57b3b3a9808","html":"<h2 id=\"0-아이디어\" style=\"position:relative;\"><a href=\"#0-%EC%95%84%EC%9D%B4%EB%94%94%EC%96%B4\" aria-label=\"0 아이디어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. 아이디어</h2>\n<ol>\n<li>협력업체는 Teleport라는 프로그램을 이용하여 파일들을 전달해준다.</li>\n<li>Teleport는 jar로 되어있다.\n<ol>\n<li>Lambda를 이용하여 jar를 돌리기</li>\n<li>Batch/ECS를 이용하여 jar를 돌리기\n<ol>\n<li>Docker를 이용</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"1-lambda를-이용하여-jar-돌리기--불가\" style=\"position:relative;\"><a href=\"#1-lambda%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-jar-%EB%8F%8C%EB%A6%AC%EA%B8%B0--%EB%B6%88%EA%B0%80\" aria-label=\"1 lambda를 이용하여 jar 돌리기  불가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Lambda를 이용하여 jar 돌리기 —> 불가</h2>\n<p>최초 아이디어는 Lambda를 이용한 것이었으나, AWS Lambda는 임시 저장소의 크기가 512MB 밖에 되지 않는다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtklEQVQI143KQW6CQABAUe5/kaaNC5MubC0CgmUYYrQRTRSxNsRxGBwisHDh5pv0BL71c65XS9tZuu6COpcoVdL3Dc+63e7/XymFbXockVSEkWbsaly3YPS5ZfheEMxa4kQz8fb40wI/yJFpRRQd8bwdYfSLkBUf45yX15i3QUq2qXHSxCC+K6QwLOYWrXtkumaV/REnNV+eJt8b1LnmcDAEkyNSlJxUzfJHM50Z/PBCtrY0TcsDRdfXPynL8z0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2022-01-27 오전 9.10.31.png\"\n        title=\"스크린샷 2022-01-27 오전 9.10.31.png\"\n        src=\"/static/538fa626069683040693ab2c50c01a68/37523/1-2022-01-279.10.31.png\"\n        srcset=\"/static/538fa626069683040693ab2c50c01a68/e9ff0/1-2022-01-279.10.31.png 180w,\n/static/538fa626069683040693ab2c50c01a68/f21e7/1-2022-01-279.10.31.png 360w,\n/static/538fa626069683040693ab2c50c01a68/37523/1-2022-01-279.10.31.png 720w,\n/static/538fa626069683040693ab2c50c01a68/ef916/1-2022-01-279.10.31.png 815w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>협력업체에서 받아올 때 하나의 단위인, order ID 대로 받아온다는 가정하에 최소 Order Size가 512MB보다 훨씬 크기 때문에 Lambda를 이용하는 것은 불가능 할 것이다.</p>\n<p>하지만 Lambda를 이용하는 방법을 강구하자면…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVQY0x3R246aUBSAYd7/LZp0mqbJTObC1gOiiChsBiVYUlt0POBGRQWFmWYuKv4NruuV9X/JUk6nE0lyIDkciKINf8KQ2WzO+/tfqrnd4HotKcuSf1fIsg+yLKV4K7nkN4qiJM0++B0mrNYpimXH1OoRzbbE6Md8evjF43NIW1timDu+N/cM7Dc8v8ASR340JVpX8vQcoGqvNNQVX795fP7iYIsIxTRNVFXFMPqE4QwhHKSMqdVq1Ot1HMfBtm3iOGazkXS7Go4rabTPrNdHeuaRtn7hxcvJ8xylWjYMAyEE8/kc3/dJkoRWq4Wu64zHYzRNY7VasdvtGQwMRl5Mx8jZyBO2k9Ltn3G9M3l+QRkOh3Q6HSrpdDrFdV2iKKLRaNwPVcFer8disWC9ju5C8fJ6ly0WWwb2Ft1McL2E6h9KJbAsi9FoxHK5JAiCu7DSVZHJZEIVlVKy3+8RwsL/ucW0c+I4xR2nDMQZP7hQFDn/AdcOoyMIeh3FAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2022-01-27 오전 9.10.39.png\"\n        title=\"스크린샷 2022-01-27 오전 9.10.39.png\"\n        src=\"/static/b533b02248717150f8bf314bfc4829a6/37523/2-2022-01-279.10.39.png\"\n        srcset=\"/static/b533b02248717150f8bf314bfc4829a6/e9ff0/2-2022-01-279.10.39.png 180w,\n/static/b533b02248717150f8bf314bfc4829a6/f21e7/2-2022-01-279.10.39.png 360w,\n/static/b533b02248717150f8bf314bfc4829a6/37523/2-2022-01-279.10.39.png 720w,\n/static/b533b02248717150f8bf314bfc4829a6/ef916/2-2022-01-279.10.39.png 815w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Order ID내 세부 단위로 들어가서 개별 파일들을 받아올 수도 있다.</p>\n<h3 id=\"어려움\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%A0%A4%EC%9B%80\" aria-label=\"어려움 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어려움</h3>\n<p>그렇지만 이런 방법을 실제 서비스를 도입했을 때,</p>\n<p>(1) 아직은 예상하기 어렵지만, 개별 파일이 512MB를 넘길 가능성이 있음</p>\n<p>(2) 개체수가 많아지면 관리하기 어려워짐</p>\n<ul>\n<li>오류가 발생했을 때 CloudWatch Logs 등을 이용하여 역추적하기가 매우 어려울 것</li>\n</ul>\n<p>등의 어려움이 있다.</p>\n<h2 id=\"2-aws-batchfargate-등-컨테이너를-이용하여-jar-돌리기\" style=\"position:relative;\"><a href=\"#2-aws-batchfargate-%EB%93%B1-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-jar-%EB%8F%8C%EB%A6%AC%EA%B8%B0\" aria-label=\"2 aws batchfargate 등 컨테이너를 이용하여 jar 돌리기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. AWS Batch(Fargate) 등 컨테이너를 이용하여 jar 돌리기</h2>\n<p>EC2, Fargate를 선택하여 docker를 돌릴 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 551px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVQ4y51UXYvTQBSd3+OzP2HxD/iLBN98kUXFB903H/ogCLYvxQeFCkuhtLiFimBrmzTtNknTJDOZfE2O3LvbJdvdaNkDlwx3Zs6cM/dOBBpQVRUHwbIsDIdDDAYDtFot9Pt9eJ53a+0eoomMYIxBmqb8LcsS2+0W4/GYx0VR8ByN63vEfar2k1JKLJdLTCYTzGYzbDYb2LaN9XrNMZ1OEUXRbcLKFOCokdUtkLosy24U/ctRo2UCkfi+z6rIVpIkd1zUD79RmPWeI+2f4tKxEUYx8jxnVURA9haLBVar1Z27OiSrjEFlSgj72SMsXz6BM/2JKIxYWRAE0FojjmMmI6V00CHRoV1W6P7oIbcmCJIUmyTjJBHVbTZZ3ZOVSsH//BHepxaEzK+Sp9+GePv94opQSiil2PoxMDLG76cn+HXyGEImipNKSqTXihzHQRiGbJ+sU2tQI5N113X5SxVPtUaiFJTWsN+/xuLVC4g/X7/AO+9BFyVkHHPv7XY7tkz3tm8XUkwhr9VTnoLW0KGOv4XlehDjd29gfTiDvb5kFbSB1D0UIo4iGHpWQcDFIFAxmorwvxCkKC8KzOdzfl5klSwdNuzRCnWtNeqv5MGE9FvqdDrodrsc7XYbo9Ho3iY+hvAv2v7Sqc6oRdAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled Diagram.drawio.png\"\n        title=\"Untitled Diagram.drawio.png\"\n        src=\"/static/5f30be0ab5d7677f138f93312e5f3a25/db783/3-UntitledDiagram.drawio.png\"\n        srcset=\"/static/5f30be0ab5d7677f138f93312e5f3a25/e9ff0/3-UntitledDiagram.drawio.png 180w,\n/static/5f30be0ab5d7677f138f93312e5f3a25/f21e7/3-UntitledDiagram.drawio.png 360w,\n/static/5f30be0ab5d7677f138f93312e5f3a25/db783/3-UntitledDiagram.drawio.png 551w\"\n        sizes=\"(max-width: 551px) 100vw, 551px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"고려해야하는-점\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EB%A0%A4%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%A0%90\" aria-label=\"고려해야하는 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>고려해야하는 점</h3>\n<ul>\n<li>Docker 작업</li>\n<li>데이터 볼륨 확인\n<ul>\n<li>지금은 TEST 데이터만(2개의 Order ID) 전달받은 상황이지만, 전체를 공유 받았을 때 <strong>어떤 주기로 어떤 크기만큼 받아올지</strong> 결정해야 데이터 볼륨을 미리 정할 수 있다.\n<ul>\n<li>EFS\n<ul>\n<li>파일을 추가하고 제거할 때마다 스토리지 용량이 탄력적으로 자동 확장, 축소 됨. 영구 스토리지로서 사용 가능</li>\n</ul>\n</li>\n<li>Fargate 기본 임시 스토리지\n<ul>\n<li>21GiB - 200GiB 까지 사용 가능하며, 컨테이너가 종료되면 해당 데이터도 날아가게 됨 → 이 경우 S3까지 옮기는 작업을 완벽하게 마무리 해야함.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"요금\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B8%88\" aria-label=\"요금 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요금</h3>\n<h3 id=\"fargate\" style=\"position:relative;\"><a href=\"#fargate\" aria-label=\"fargate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fargate</h3>\n<ul>\n<li>별도의 선결제 금액 없이 컨테이너의 CPU, Memory 사용량에 기반하여 초 단위로 요금이 과금 됨. (Docker로 이미지 풀링을 시작하는 시점부터 해당 작업이 종료될 때까지)</li>\n</ul>\n<h3 id=\"ec2\" style=\"position:relative;\"><a href=\"#ec2\" aria-label=\"ec2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2</h3>\n<ul>\n<li>RI는 사용이 불가능하며, Spot 으로 사용 가능. (온디맨드 대비 최대 70% 절약 가능) — 다만 Spot 인스턴스는 언제든 종료될 수 있으므로 실제 서비스에서 사용하는 것은 위험 부담이 있음.</li>\n</ul>\n<h3 id=\"efs\" style=\"position:relative;\"><a href=\"#efs\" aria-label=\"efs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EFS</h3>\n<ul>\n<li>서울 리전 기준 0.09 USD/GB</li>\n</ul>\n<h3 id=\"data-sync\" style=\"position:relative;\"><a href=\"#data-sync\" aria-label=\"data sync permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Sync</h3>\n<ul>\n<li>EFS → S3 파일 전송 (요금이 발생하기 때문에 굳이 이를 이용하지 않고 S3 API 를 이용해서 옮기는게 비용효율적으로 생각됨.)</li>\n<li>0.0125 USD/GB</li>\n</ul>\n<h3 id=\"요청-해야하는-권한--개인-계정에서-fulladmin-권한으로-진행해서-정확하지-않을-수-있음\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%B2%AD-%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EA%B6%8C%ED%95%9C--%EA%B0%9C%EC%9D%B8-%EA%B3%84%EC%A0%95%EC%97%90%EC%84%9C-fulladmin-%EA%B6%8C%ED%95%9C%EC%9C%BC%EB%A1%9C-%EC%A7%84%ED%96%89%ED%95%B4%EC%84%9C-%EC%A0%95%ED%99%95%ED%95%98%EC%A7%80-%EC%95%8A%EC%9D%84-%EC%88%98-%EC%9E%88%EC%9D%8C\" aria-label=\"요청 해야하는 권한  개인 계정에서 fulladmin 권한으로 진행해서 정확하지 않을 수 있음 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요청 해야하는 권한 — 개인 계정에서 FullAdmin 권한으로 진행해서 정확하지 않을 수 있음</h3>\n<ul>\n<li>Batch 작업에 필요한 권한\n<ul>\n<li>AWSBatchServiceRole</li>\n</ul>\n</li>\n<li>EFS 생성/읽기/목록 작업에 필요한 정책 등</li>\n</ul>\n<p>후일담\n: 이 파이프라인의 진행은 사실상 Role/Policy 와의 전쟁이었음</p>","frontmatter":{"date":"January 01, 2022","title":"협력 업체 음원 수급 자동화를 위한 파이프라인 만들기 A (구상하기)","categories":"craft","author":"신나라","emoji":"🔨"},"fields":{"slug":"/universal-music-pipline-sketch/"}},"site":{"siteMetadata":{"siteUrl":"https://nara.dev","comments":{"utterances":{"repo":"narashin/narashin.github.io"}}}}},"pageContext":{"slug":"/universal-music-pipeline/","nextSlug":"/ssm-watcher/","prevSlug":"/universal-music-pipline-sketch/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}